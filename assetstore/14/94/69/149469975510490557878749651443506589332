HOUSTON JOURNAL OF MATHEMATICS, Volume 11, No. 3, 1985. 
COMPLETENESS OF MANY-SORTED EQUATIONAL LOGIC* 
J. A. Goguen and J. Meseguer 
ABSTRACT. Assuming that many-sorted oquationallogic "goes 
just as for the one-sorted case" has led to incorrect statements of 
results in many-sorted universal algebra; in fact, the one-sorted 
rules are not sound for many-sorted eduction. This paper gives 
sound and complete rules, and characterizes when the one-sorted 
rules can still be used safely; it also characterizes the related 
question of when many-sorted algebras can be represented as 
one-sorted algebras. The paper contains a detailed introduction 
to Hall's theory of clones (later developed into "algebraic 
theories" by Lawvere and Benabou); this allows a full 
algebraization of many-sorted equational deduction that is not 
possible with the usual fully invariant congruences on the free 
algebra on countably many generators. 
1. Introduction. The naive generalization to many-sorted algebra of the usual 
rules of one-sorted equational deduction is not sound. The aim of this paper is to state 
precisely what the differences are from the one-sorted case, to provide sound and 
complete many-sorted rules of deduction, and to give necessary and sufficient 
conditions under which the ordinary one-sorted rules are equivalent to our new rules. 
Some subtle differences from the one-sorted case seem not to have been recognized 
previously, but they have important model-theoretic consequences. For example, the 
Birkhoff Theorem does not hold as stated in [14] (the first paper on many-sorted 
algebra) precisely because the one-sorted notion of satisfaction of an equation is too 
naive for the many-sorted case. The categorical approach to many-sorted universal 
algebra [2] has an abstract version of the right proof theory (given as a category) and 
it provides an abstract proof of the Completeness Theorem (using the Yoneda Lemma 
[16, 2]). However, the implications which are implicit in the categorical approach 
*Supported in part by the Office of Naval Research Contracts N00014-80-C-0296 and 
N00014-82-C-0333, by National Science Foundation Grant No. MCS8201380, and by a gift from the 
System Development Foundation. 
307 
308 J.A. GOGUEN and J. MESEGUER 
have not been fully recognized. For example, [2], Theorem 2.2.4.1, asserts the 
existence of functionally free algebras [211 for any variety of many-sorted algebras, 
an assertion that is shown to be false in this paper. However, the comments of [17] 
show that Lawvere is fully aware of the inadequacy of the usual way of interpreting 
variables and terms in a model. Here, we correct the usual use of equational logic, 
previously assumed in the literature to be sound. 
Familiarity with the categorical approach to universal algebra is not necessary to 
read this paper. Indeed, it uses the smallest possible amount of technical machinery, 
and for the most part uses only many-sorted algebras, homomorphisms and 
congruences. Nevertheless, several auxiliary remarks indicate connections with the 
categorical approach, and we think that the interested reader will have less difficulty 
later with more abstract presentations, having seen these more concrete versions of the 
same concepts. 
Our interest in this problem arose from our work on abstract data types in 
theoretical computer science, where many-sorted algebras are used for a variety of 
purposes [5, 22, 13, 12, 8, 20, 11, 19], in particular, [15] gives a bibliography 
containing 870 papers "related to algebraically specified abstract data types." For such 
applications, our results have practical significance, because they support correct 
computer implementations. 
The rest of this introduction illustrates the problem by means of two simple 
examples, introduces a convenient notation for the correct rules of equational 
deduction, and then informally summarizes our results. 
1.1 SATISFACTION OF EQUATIONS IN MANY-SORTED ALGEBRAS. This 
subsection gives the basic definitions for many-sorted algebras, including the 
satisfaction of equations, to be used in the rest of the paper; this will make precise the 
statements in the rest of the introduction. 
Let I be a set (of sorts), then anI-sorted (or I-indexed) set A is just a family of 
component sets A i for each index i in I. We say that an I-sorted set A = {Aili G I) is 
finite if and only if the disjoint union q•iAi s a finite set. If A and B are both I-sorted 
sets, then an I-sorted fi•nction f: A -> B is an I-sorted family of functions 
(fi: Ai-• Bili G I)' 
COMPLETENESS OF MANY-SORTED EQUATIONAL LOGIC 309 
An I-sorted signature 23 is an I* X I-sorted family {23w, ilwC I*, i C I} (where I*
denotes the free monoid on I); o in 23w, i is a function symbol farity w and sort i; the 
arity of a function symbol expresses what sorts of data it expects in its arguments and 
in what order; and the sort of a function symbol expresses the sort of data of the 
result. A constant symbol of sort i has arity the empty string e, i.e., it is a member of 
23e,i' 
A 23-algebra A consists of an I-sorted family {Aili • I), of carrier sets, and for 
each function symbol  in 23w,i an actual function A o' A w-•A i where A w= 
Ail X-'-X Ain when w = i 1 '" i n (when w = e, then ATM isa one point set and Ao can 
be identified with an element of Ai). 
A 23-homomorphism from a 23-algebra A to another B is an I-sorted function 
f: A -• B that "preserves the function symbols in 22" in the sense that 
fi(Ao (a 1 .... ,an)) =Bo(fi 1 (a 1 ),'",fin(an)), 
where w = i 1 '-- i n with aj in Aij and oin 23w,i' For constants, i.e., for w = e, the 
condition becomes 
fi(Av) = B o- 
Given an I-sorted set X = (X i)i6I and signature 23 then the free 23-algebra on X (also 
called the "algebra of 23-terms with variables inX") is denoted F23(X). (For F23(X) to 
have the universal property, terms should be unambiguous; a sufficient condition for 
this is to require 23w, i (q 23 .... 0 whenever length(w) = length(w') and (w,i) 4: (w',i'). W,1 
This can always be ensured r placing 23 by 23#, where 23#w,i = 23w,i X ((w,i) },and we 
will assume throughout that terms are always built from such a disambiguated 
signature whenever 23 is ambiguous.) Its carrier sets are defined inductively by 
(1) 22e, i • Xi _C F23(X)i for each i in I; and 
(2) o(t 1 ,...,t n) is in F23(X) i for each o in 23il...in, i and each tj in F23(X)ij for
j= 1 .... ,n. 
F22(X) is made into a 23-algebra y defining F23(X) o for o in 23e,i to be the symbol  in 
F23(X) (it is in F23(X) by (1)); and defining the function F22(X) o foro in 23w,i for 
w 4: e, to send (t1,...,t n) in (F23(X)) TM to the term o(t 1,...,t n) in F23(X) i (it is in F23(X) 
by (2)). It is a basic fact about free algebras that they have the following universal 
310 J.A. GOGUEN and J. MESEGUER 
property: given a Z-algebra A and an I-sorted function f: X-• A, there is a unique 
Z-homomorphism t4•: Fz(X) -• A extending f, i.e., such t at the diagram 
nX 
X • Fz(X) 
I 
if # 
I 
A 
commutes, where •tX is the I-sorted inclusion of X into Fz;(X). 
CONVENTION. The superscript of • is sometimes dropped, sothat in the rest 
of this paper the same letter f may denote the map X-* A and its homomorphic 
extension Fz(X) -* A. 
The universal property above determines the algebra Fz;(X) up to a unique 
isomorphism. The algebra FZ(0), for 0 the I-sorted set with all its sorts empty, is 
called the initial Z-algebra; the universal property then says that for each Z-algebra A 
there is a unique 23-homomorphism F23(0) -*A. Given an I-sorted set X we can think 
of the elements of X i (for i in I) as variable symbols of sort i. Given a Z-algebra A, an 
I-sorted mapping f: X -• A is called an assignment from X to A. A Z-equation, denoted 
(VX) t 1 = t 2 
is a triple (X,tl,t 2) with X a finite I-sorted set andt 1,t 2 in Fz;(X) i for some sort i. We 
say that a Z-algebra A satisfies the Z-equation (VX) t 1 = t 2 if and only if for every 
assignment f: X -* A, we have that 4(t 1) = t4(t2). Given a set P of 2;-equations, we 
say that a Z-algebra A satisfies F if and only if A satisfies each equation in P; in that 
case, we call A a (Z,P)-algebra. The class of all (Z,F)-algebras is called the variety of F. 
An ordinary Z-equation, denoted 
t 1 = t 2, 
is a pair (t 1,t 2) of terms of same sort in Fz;(X) for some X. We say that an algebra A
satisfies the ordinary equation t 1 = t 2 if and only if it satisfies the equation 
(VX') t 1 = t 2 
for X' the I-sorted set of variables that occur in either t 1 or t 2. For one-sorted algebra 
there is no need to introduce quantifiers into equations, i.e., ordinary equations are 
COMPLETENESS OF MANY-SORTED EQUATIONAL LOGIC 311 
enough to describe all varieties and to handle equational deduction and satisfaction. 
We will see that this is not the case for many-sorted algebra. 
1.2UNSOUND DEDUCTIONS. The following example demonstrates the 
unsoundness of using the usual one-sorted rules for many-sorted deduction. Let • be 
the signature with sort set {a,b), and with •e,b = (T,F), •b,b =( -1 ), •bb,b = (&'+)' 
•a,b = (FOO), and •u,v = 0 for all other u,v. (Although we intend "b" to suggest 
"Boolean," Y•-algebras need not have as elements of sort b exactly the truth-values T 
and F; indeed, it may help to think of T and F as two arbitrary symbols that may or 
may not happen to denote the same element in an algebra.) Finally, let I • consist of 
the following seven ordinary equations, where A,B are variables of sorts a,b, 
respectively 
•T=F 
-IF=T 
B+•B=T 
B&-IB=F 
B&B=B 
B+B=B 
FOO(A) = --1FOO(A). 
Boolean algebra gives the first six equations. The rules of one-sorted equational 
deduction now give 
T = FOO(A) + -1FOO(A) = FOO(A) + FOO(A) 
= FOO(A) 
= FOO(A) & FOO(A) = FOO(A) & -1FOO(A) 
=1 •. 
If this deduction were sound, then the equation T = F should hold in every •-algebra 
satisfying I •. But there is a •-algebra BAR satisfying 1 • where this is not so: BAR a = 0; 
BAR b = (T,F•; FOO is the empty function; and all the boolean functions are as 
expected. Therefore these rules are not sound. This example evolved from one 
suggested by Gerard Huet, who pointed out to us the unsoundness of the ordinary 
rules of deduction in the many-sorted case; the present is intended to suggest how 
312 J.A. GOGUEN and J. MESEGUER 
unsoundness might arise in practical examples such as parameterized abstract data 
type definitions. 
Another example of a signature without constants i the following: I = {a,b}, 
Za, a = {o}, Zab,a ={g}, and F the following two ordinary equations 
o(x) = •(x,y) 
I•(u (x,y),z) = •(x,y). 
The rules of one-sorted equational deduction give 
o (o (x)) = •(o (x),y) = •Cu(x,y),y) = •(x,y) = o (x). 
The free algebra F2;({x)) (x of sort a) has F2;({x)) a= {on(x)ln Cco}, F•;({x)) b = 0, 
and satisfies F trivially, but does not satisfy the ordinary equation o(o(x)) = o(x). 
1.3 THE RULES OF DEDUCTION. The first step toward correcting this 
situation has already been taken: Equations must have all variables explicitly declared 
with their sorts, yielding what can be thought of as equations with explicit quantifiers. 
But, if the old one-sorted rules of deduction are modified in this way, the resulting 
system is not complete. Two new rules are needed for adding and deleting quantifiers. 
Given a signature •; and a set of Z-equations, the following are the rules for deriving 
equations: 
(1) Refiexivity. Each equation 
is derivable. 
(2) Symmetry. If 
(vx) t = t 
(VX) t = t' 
(4) Substitutivity. If 
(VX) t = t". 
(VX) t 1 = t 2 
are derivable, then so is 
is derivable, then so is 
(VX) t'=t. 
(3) Transitivity. If the ecluations 
(VX) t: t', (VX) t' = t" 
COMPLETENESS OF MANY-SORTED EQUATIONAL LOGIC 313 
of sort i is derivable, if x G X is of sort i', and if 
(VY) u 1 = u 2 
of sort i' is derivable, then so is 
(VZ) v 1 = v2, 
where Z=(X-{x})UY, vj= tj(x +-- uj)forj= 1,2, and"tj(x +-- uj)" denotes the 
result of substituting uj for x in tj. (This notion of substitution ca be made precise 
by using the same machinery that was used above to define equational satisfaction. 
Let t be a Z-term with variables from X, i.e., t GF2(X). Let x G X i and let 
u G T2(Z), where Z=(X-{x }) U Y. Now define f:X --> F2(Z) by f(y) = y if y 4 = x, 
and fix) = u. Then tiP: F•(X) --> F2(Z) is the unique 2-homomorphism extending f, 
and we define t(x *-- u) = f4P(t).) 
The following two rules complete the system: 
(5) Abstraction. If 
(VX) t=t' 
is derivable, if y is a variable of sort i and y is not in X, then 
(VX U (y}) t = t' 
is also derivable. (This rule also applies ifX = 0, where there are originally no variables, 
and one is added.) 
(6) Concretion. Let us say that a sort i is void in a signature Z iff FZ(•))i = •). 
Now, if 
(VX) t=t' 
is derivable, if x G X i does not appear in either t or t', and if i is non-void, then 
(VX- (x}) t = t' 
is also derivable. 
1.4 THE EXAMPLES AGAIN. In the first example, making explicit the 
quantifiers of the equations, it is easy to check that the deductive sequence given 
proves the equation 
(V {{A},0}) T = F 
but not the equation 
(V•)) T = F. 
Similarly, in the second example the deductive sequence proves the equation 
314 
but not the equation 
J. A. GOGUEN and J. MESEGUER 
( v { {x},{y }})o (o (x)) =o(x) 
(V((x) ,0)) o(o(x)) = o(x). 
We are unable to apply the rule of concretion in either example, due to the presence 
of a void sort. 
1.5 SUMMARY OF RESULTS. This section summarizes the main results of this 
paper, beginning with the 
COMPLETENESS THEOREM. Given a set F of 23-equations, then an equation 
(¾X) t = t' 
is satisfied by every algebra in the variety of F iff it is derivable from F using the rules 
(1) to (6) of Section 1.3. 
We now give necessary and sufficient conditions on Z for the ordinary rules of 
equational deduction to yield the same derived equations as our rules, and hence to be 
complete. The ordinary form of a 23-equation is the ordinary equation obtained by 
eliminating the quantifier. By the ordinary rules ofequational deduction we mean the 
variants of rules (1) to (4) of Section 1.3 obtained by eliminating the quantifiers 
(V X). Then, for a given signature 23, we say that the Completeness Theorem holds in 
ordinary form iff for any set F of 23-equations (with quantifiers), an ordinary equation 
is satisfied by all algebras satisfying F iff it is derivable from the ordinary forms of the 
equations in F using the ordinary rules of equational deduction. Recall that a sort i is 
void in 23 iff F23(0) i = 0. Let 23 (x: i ) denote the new signature constructed from 23 by 
adding a new constant x of sort i. 
THEOREM 2. The Completeness Theorem holds in ordinary form for a signature 
23 iff for all sorts i,i' of Z, i' is non-void in the signature 23 (x: i). 
REMARK. The condition given in Theorem 2 is equivalent to the following 
model-theoretic condition: "For every 23-algebra A, if some A i is empty, then every A i 
is empty." 
Given a set F of equations, an algebra A is initial in the variety of F iff there is a 
unique 23-homomorphism from A to any other algebra in the variety of F (this in fact 
characterizes such an initial algebra up to isomorphism). The initial algebra in the 
variety of F can be obtained as the quotient of the initial 23-algebra FZ(0) by the 
COMPLETENESS OF MANY-SORTED EQUATIONAL LOGIC 31 $ 
congruence formed by all pairs (t,t') such that t,t' are Z-terms (without variables!) and 
(V0) t=t' 
is derivable from F. We will say that the initial algebra of the variety of a set F of 
equations (with quantifiers) is definable in ordinary form iff it is the quotient of the 
initial Z-algebra by the congruence formed by all pairs (t,t') such that t = t' is 
derivable from F by the ordinary rules of equational deduction. We next give 
conditions, weaker than those of Theorem 2, which characterize exactly when this can 
be done. Let us say that a sort s is quasi-isolated in X iff either it is void in X, or else 
there is only one Z-term of sort s. 
THEOREM 1. For a given signature 2;, the initial algebra in the variety of F is 
definable in ordinary form for every set F of equations (with quantifiersJ iff either 
ever), sort in X is quasi-isolated or else every sort in 2: is non-void. 
REMARK. The condition given in Theorem 1 is equivalent to the following 
model-theoretic condition in terms of reachable algebras (a Z-algebra A is reachable iff 
the unique homomorphism Fy,(0)---> A is surjective): "For every reachable Z-algebra 
A, if some A i is empty, then IAil •< 1 for every i." 
The above results show that the ordinary rules of deduction will suffice for most 
examples that one could expect to arise in practice. But there are some important 
exceptions. For example, in the theory of abstract data types, void sorts often occur 
in the equational theories associated with parameterized data abstractions. Thus, 
consider the parameterized data type Set(X); given an instance of X, it produces 
(finite) Sets of X's. The theory associated with Set(X) has a constant of sort set, 
namely the empty set, but has no constants of the parameter sort X, and no operations 
that could produce such constants. (For further discussion of parameterized data types, 
see for example [1 1, 7, 4, 10].) In any case, we want to be able to state results with 
the greatest possible simplicity and generality, and we believe that the explicit use of 
quantifiers is the right way to achieve this for many-sorted equational logic. 
Theorem 2 characterizes the signatures for which many-sorted equational 
deduction can be reduced to one-sorted equational deduction. Using a result of [ 1 ] we 
can show that the signatures mentioned in Theorem 2 are exactly those X for which 
every variety of (X,F)-algebras can be faithfully represented by a one-sorted variety. 
3 1 6 J.A. GOGUEN and J. MESEGUER 
By this is meant that there is an equivalence of categories between the category of 
(23,F)-algebras and a category of one-sorted (23*,F*)-algebras in such a way that a 
many-sorted algebra A = {Ai)iC I is mapped toa one-sorted algebra with carrier Ilia i. 
THEOREM 3. The Completeness Theorem holds in ordinary form for a signature 
23 iff for each set F of 23-equations the variety of (23,F)-algebras can be faithfully 
represented by a variety of one-sorted algebras. 
2. Many-sorted algebras. Let I be a set. Then the category Set I has I-sorted sets 
as objects and I-sorted functions as morphisms. The category of I-sorted signatures is 
simply the category Set I*XI of (I* X I)-sorted sets. We denote these signatures by 
Greek capital letters, such as 23, I2, and we denote their elements by lower case Greek 
letters, uch as o C 23w, i. The category Alg23 of Z-algebras, for23 an I-sorted signature, 
has Z-algebras as objects and 23-homomorphisms as morphisms. A Z-homomorphism f 
is said to be surjective, injectire, or an isomorphism, iff for each i 6 1 the map fi is 
surjective, injective, or bijective, respectively. A Z-congruence on a 23-algebra A is a 
family R= {Ri)iC I of equivalence relations R iC_Ai2 that is "compatible withthe 
operations" in the sense that for each o6 Zw, iwith w = i 1 "- i k • I* and with i C I, 
if aj,bj 6 Aij for j = 1,...,k are such t at ajRiib j then also 
Ao(al,...,a k) R i Ao(b 1 ,...,bk). 
Given a 23-algebra A and a Z-congruence R on A, there is a canonical Z-algebra 
structure on A/R = (Ai/Ri)i6 1 induced by the one on A and making the canonical 
surjection qR: A -> A/R a 23-homomorphism. Any 23-homomorphism f: A -> B induces 
a 23-congruence Ef with Ef, i the equivalence relation associated o the map fi and we 
have a 23-isomorphism #: A/Eft-f(A) such t at f=J'#'qEf where j: f(A)-• B is the 
inclusion homomorphism (this is the so-called homomorphism theorem). The set of all 
23-congruences on an algebra A is a complete lattice which we shall denote C(A). 
3. Derived operations and the completeness theorem. Given an I-sorted 
23-algebra A = { A i}iGI and aset X, we can construct the Z-algebra A ised to the X th 
power denoted [X,A], with [X,A] i = [X,Ai], the set of all functions from X to A i, 
and with operations defined componentwise by 
IX,A] o(fl,...,fk)(X) = Ao(fl(x) .... ,fk(x)), for all x • X. 
COMPLETENESS OF MANY-SORTED EQUATIONAL LOGIC 317 
In particular, for each word w C I* we have the algebra [AW,A], and if the letter i 
i 
appears n itimes in the word w,we will have n iprojection maps •r•..... •rni C[AW,Ai ] if 
A TM =/: 0 and IAi[ > 1, or the unique map ½i • [AW,Ai ] if A TM =0 or IAil -- 1. 
Let Xco denote an I-sorted set with a countable infinity of variables in each 
i i 
component, say Xco,i = (Xl,...,x n.... }. For each w G I* we can define a finite I-sorted 
subset X w of Xco with Xw, i =0 if i does not occur in w, and with Xw, i ={x i,...,Xini ) 
if i occurs ni times in w. For each w G I* we then define the algebra D(A) w of 
w-derived operations of a Z-algebra A as the image algebra of the Z-homomorphism 
Aw: Fz(X w) • [AW, A] which extends the I-sorted map Aw: X w-• [AW,A] sending 
i to i if A TM =/: 0 and IAil > 1 and otherwise sending for each sort i occurring i  w, xj rrj , 
x! to ½i' J 
By a family of Z-equations we mean an I-sorted signature I' = {I'w,i}wGi,,iCi 
such t at 1-'w, i __C FZ(Xw) i 2. This i  just aslight reformulation of he notation used in 
the introduction, namely, a pair (t,t') G 1-'w, i in the I-sorted signature I' corresponds to 
an equation 
(V X w) t = t', 
and quantifying only over sets X w involves no loss of generality, since any finite 
I-sorted set can be put into I-sorted bijection with one of the form X w for some 
wGI* 
We now reformulate the notion of satisfaction of an equation to an equivalent 
one that is technically more convenient. 
LEMMA. An equation 
(i) (¾X w) t=t' 
is satisfied by a Z-algebra A if and only if 
(ii) Aw(t) = Aw(t'). 
PROOF. Note that if w = i 1 -" i k then a tuple (a 1,...,a k) G A TM is essentially the 
same thing as an I-sorted function a' X w • A that we shall denote by (a 1 ..... ak): 
X w -• A, and call an assignment. To see (ii)=• (i) it suffices to show that for any 
assignment a = (al,...,ak>: X w-• A the induced homomorphism a#: Fz(X w) • A 
factors as 
($) a # = evalaOAw, 
318 J.A. GOGUEN and J. MESEGUER 
where vala: [AW, A] -• A is the homomorphism that maps each  C [AW,Ai ] to the 
value h(a 1.... ,ak) CA i. This follows byuniqueness of a # from the fact hat, by 
definition, 
evalaoAwor/Xw = a. 
To see the implication (i)=• (ii), notice that if Aw(t):/: Aw(t'), then there is a tuple 
(al,...,a k) • A TM such that Aw(t)(a 1,...,a k) :/: Aw(t')(a 1,...,ak). Defining a = (a 1,...,ak): 
X w -• A and considering the equation ($), one gets 
a#(t) = evala(Aw(t)) =/= evala(Aw(t')) = a#(t'), 
showing that A does not satisfy the equation (V Xw) t = t'.ß 
We shall denote by Algz, F the full subcategory of Alg Z formed by those algebras 
which satisfy F, i.e., the variety of algebras defined by the equations F. 
The above discussion involves four I-sorted signatures, namely: the family 
(FZ(Xw)i }w•I*,i•I which we shall denote TZ; the family { [AW, Ai ] }w•I*,iCI which 
we shall denote O(A); the family (D(A)w, i }wGI*,iGI which we shall denoteD(A) and 
which isby definition the image of the signature map A = ( Aw, i}: T Z -> O(A); and the 
family F = (Fw, i}wGi.,iGi which comes equipped with two projection maps to the 
signature T Z d noted Pl,P2: F•Tz inherited respectively from those of T• 2. The 
property of an algebra A satisfying the equations I' can then be expressed in a more 
compact form by the condition AOpl = Aop2 or by commutativity ofthe diagram 
Pl A 
F •>T•; > O(A). 
P2 
In addition, the signatures T Z and O(A) (and hence also D(A)) have an I* X I-sorted 
algebra structure which is preserved by the map A. This algebraic structure has been 
called a clone by P. Hall [6] and an algebraic theory by F. W. Lawvere, who exploited 
its potentialities in a far-reaching way [16,2]. It captures the notion of substitution 
(of words in T•; and of functions inO(A)) which is only implicit in earlier approaches. 
We proceed to describe this structure in detail, but in a first reading one might prefer 
to pass from the definition of • below to the discussions of O(A) and T•; skipping the 
axioms © below except, perhaps, for their names. 
The signature of I-clone operations is the (I* X I)* X (I* X D-sorted family •= 
COMPLETENESS OF MANY-SORTED EQUATIONAL LOGIC 319 
{•2w, u }wC(I*XI)*,uCI*XI with 
' i } if i occurs n itimes in w •2e,(w,i ) -- {•r•,...,•rni 
= 0 otherwise. 
•2(w,i)(vl,il) ... (vk,ik),(Vk+l,i) -- •- [-,.... -] } ifv 1 ..... Vk+ 1 and w -- i 1 --' i k 
=(-Vk+l • ifw--eandk=0 
-- 0 otherwise. 
The constants •r• are called projections, while- [-,...,-] and -v are called substitution 
op era tors. 
For an •2-algebra to be a clone, it has to satisfy the following equations ©, where 
to avoid confusion we use Greek letters d• TM for variables of sort (w,i), where w C I* 
•n ' 
i • I and n • co (co denotes the non-negative integers)' 
(i) Projection Axiom. Equations of sort (v, il)'-.(v, ik),(w,i), with w--il...ik, 
and im the jth occurrence ofi in w: 
•rif,•v,il ,•v,ik• = •v,im jLV'nl '""V'nk J -nj ' 
(ii) Identity Axiom Equations of sort (w,i),(w,i) with w = il...ik, and nij the 
number of occurrences of ij up to the jth place: 
,0wi• il ik , 0w,i n' trrnil'""rrnikJ = -n ' 
(iii) Associativity Axiom. Equations of sort (w,i)(v,il)o.'(v,ik) 
(u,jl)'-. (u,jh),(u,i), with w = il" 'ik, v = j 1.. 'jh: 
•w, if,,v, ilr,•u,jl a,u,jh• a,v,ik•,,u,jl ..,• h ] n t'•nl LV'ml ""'Wmh J""'•'nk tWml- 
=.•w, ir.•w, il .•v, ik,[0r•ql,...,0•jh h] w n tV,nl ,...,S nk i . 
(iv) Invariance of Constant Functions Axiom. Equations of sort (e,i),(v,i): 
•e,i[mv, il mv,ik] e,i v "nl ""'"nk = •v ' 
i 
Well-known facts about functions give that O(A) is a clone interpreting therrj as 
projection functions, -[-,...,-] as substitution of functions (i.e., f, hl,...,hk• 
f(h 1 .... ,hk)), and -v as the conversion of constants into constant functions (i.e., 
1 • A i• A v -• 1 • Ai). Similarly, TZ is a clone interpreting rr! as x! and - [-, .... -] as J J 
320 J.A. GOGUEN and J. MESEGUER 
term substitution, i.e., the function 
- (-,...,-) 
FZ(Xw) i X FZ(Xv)il X-.'X Fz(Xv)ik ) Fz(Xv) i
sending t,t1 .... ,t k to the term t(tl,...,tk), defined for w = i 1 o"i k and for t G Fz(X w) 
as the image of t under the unique Z-homomorphism in the diagram 
r/x w 
X w ) Fz(X w) 
(t 1..... tk) • - (t 1,...,tk) 
Fz(X v) 
diagram 
A 
T Z ) O(A) 
F ø can be described as thesmallest I* X I-sorted subset of T• that contains for each 
w CI* and i CI, both Fw, i and the diagonal {(t,t)lt • (TZ)w,i}, and is closed under 
symmetry, transitivity, and substitution, i.e., satisfies the conditions: 
o o (a) (t,t') G Fw, i =• (t',t) • Fw,i; 
(t,t),(t ,t ) G Fw, i =• (t,t") c Fw,i; (b) ' '" ø ø 
o o I • o (c) (t,t') • r'w, i and (tj,t_'j) • Fv,ij for j= 1 .... ,k =• (t(tl,...,tk),t (t•,...,tk)) • Fv, i
Note that by fixing v and the first variable above, term substitution gives the derived 
operations of FZ(Xv), i.e., t(tl,...,tk)= Fz(Xv)(t)(tl,...,tk). Finally the-v are 
interpreted asthe unique homomorphisms-v: Fz(Xe) = FZ(0) -> FZ(Xv)' The axioms 
(i) - (iv) can now be verified from the universal property of free Z-algebras; that the 
map A: T Z -> O(A) associated to a Z-algebra A is a clone homomorphism also 
follows from the constructions. 
Another consequence of the above discussion isthat a Z-algebra A satisfies given 
equations F_C T• if and only ifthe clone map A: T Z -> O(A) factors through the 
canonical surjection qFo' Tz->Tz/Fo for F ø the smallest clone congruence (i.e., 
C/,-congruence) on T Z containing F, i.e., if and only if we have the commutative 
COMPLETENESS OF MANY-SORTED EQUATIONAL LOGIC 321 
whenever w= i 1 ' ø 'ik; 
o • o (d) (t,t') c Fe, i =• (tv, tv) = (t,t') C Fv, i- 
The generation of V ø from V is actually an algebraic reformulation of the generation 
of all the equations provable from a given set of equations F by the rules of 
many-sorted equational deduction. Indeed, by the above discussion and the remark 
below, the deduction process can be understood as generating an appropriate congruence. 
REMARK. The generation rules for F ø given above are equivalent to the 
deduction rules (1) - (6) given in the introduction. We now sketch the main steps of 
o 
this equivalence: reflexivity (1)is the condition Vw, i _D { (t,t)lt G (rZ)w,i}; symmetry 
(2) is condition (a), and transitivity (3) is condition (b); that substitutivity (4) is 
equivalent to condition (c) follows easily (by induction) after application of the 
identity, projection, and associativity axioms in the definition of clones or, more 
directly, by elementary properties of term substitution. Condition (d) is a simple 
special case of abstraction (5), so (5) =• (d). On the other hand, F ø reflexive, (c), and 
(d) imply (5) by the identity axiom in the definition of clone, and imply (6) by the 
associativity and projection axioms in the definition of clone, using that (by 
hypothesis) t = t(x 2 .... ,x n) and t' = t'(x2,...,Xn), and that the sort i1 is non-void. Hence 
we get the desired equivalence. 
We can now define a Galois connection between the complete lattice C(T•;) of 
clone congruences on T• and the set VAR• of all varieties (i.e., equationally 
definable subcategories) of Algz ordered by inclusion: namely, to each clone 
congruence E we associate Algz, E and to each variety _A__C Algz we associate the 
congruence E A = NAGAE A where E A is the congruence associated to the map 
_ -- 
A: Tz-•O(A). The map E•Alg•;,E is clearly surjective. It is also an 
anti-isomorphism of complete lattices C(Tz) • I•ARz by the following. 
COMPLETENESS THEOREM. Let _A=Algz,i-, be a variety defined by 
equations V __C TZ2.Then the smallest clone congruence V ø generated by V coincides 
o 
with the congruence E A =NAGAEA defined above. b• other words, (t,t') G Fw, i if 
_ _ 
and only if A(t) = A(t') for all A GA. 
-- 
o 
PROOF. That (t,t') G Vw, i =• A(t) = A(t') for all A G _A follows from the above 
discussion. To see the opposite implication, it suffices to give for each w G I* an 
322 J.A. GOGUEN and J. MESEGUER 
algebra A w C _A such that for iC I and t,t' C Fz;(Xw) i we have Aw(t) = Aw(t') implies 
o (t,t') • l•w,i . For each w • I* consider the family • (T2/l•ø)w,i •i•I which we shall 
denote by F•,i•(Xw). From the definition f I •ø it follows that F2,1•(X w) has a 
well-defined 2-algebra structure inherited as a quotient from that of F•(X w) = 
• (TZ;)w,i•i• I and that F•,i•(X w) belongs to _A by defining 
F2,1•(Xw)(V)([t 1] .... ,[tk]) = [v(tl,...,tk) ]. 
Suppose now that t,t'C F2(Xw) i are such that F•,l•(Xw)(t)= F•,l•(Xw)(t'). In 
particular, if w = il---ik, we will have 
ik ) [t(xil,. ' xik )• F2,1•(Xw)(t)([xil],...,[Xni k] = ., i I 
ik ) 
= F2,1•(Xw)(t')([xll ] ,-.., Xni k] 
[t,(xll ik = ,...,xnik)], 
o 
and by the identity axiom (ii) this forces It] = It'], i.e., (t,t') • l•w,i .-
REMARK. This Completeness Theorem can also be obtained using methods of 
category theory, and the proof is very simple and elegant that way. T2/i•o has the 
structure of a category with finite products sothat a clone map A: T2/l•O -• O(A) can 
be seen as a product-preserving functor T•/l•o-• Set and homomorphisms then 
become natural transformations between such functors. The proof of the 
Completeness Theorem can then be reduced to two successive applications of the 
Yoneda Lemma. This idea is due to Lawvere [ 16] for the case of one-sorted algebras, 
where the Completeness Theorem appears as an immediate corollary of his 
structure-semantics adjointness theorem. A similar argument appeared in the thesis of 
Benabou [2] for many-sorted algebras. 
4. Faithful clone congruences and fully invariant congruences. It is well-known 
that given a  I-sorted signature 2 and equations 1 • C T• 2there isa .free (2,1•)-algebra 
on each I-sorted set X, say TZ;,F(X), which is a quotient ofF•(X) and which as the 
universal property: T•,F(X) satisfies 1 • and for any 1-sorted map f: X-•A to a 
2-algebra satisfying 1 • there exists a unique homomorphism f* such that f equals the 
f* 
composition X-• F•(X)-• T•,i•(X) • A. Hence T•,i• can be seen as a functor 
from the category of I-sorted sets to Alg•,[•. We shall soon see how these free algebras 
COMPLETENESS OF MANY-SORTED EQUATIONAL LOGIC 323 
look, but all the above assertions follow by abstract nonsense from the 
homomorphism theorem and the fact that AIgx, F is closed in Alga: under the 
formation of products and subalgebras. 
We now claim that the algebras FZ,F(X w) = ((Tx,FO)w,i}iC I encountered in 
Section 3 are the free (X,F)-algebras onthe sets X w. This can be seen directly from 
the definition of F ø, or in more abstract terms as a consequence of the Yoneda 
Lemma (see the remark at the end of Section 3). Then the free (X,F)-algebra on Xco as 
understood in the last section (i.e., countably infinite variables for each sort) has an 
o 
easy description in terms of Fx(XCO) and Fø: let F w C FX(Xw)2 denote he 
o o 
congruence defining FX,F(Xw), i.e., let F w = {F'w,i}iCI and let F 'ø = 
o (Xco)2. o Uw•i,F w_C F• Then we claim that F•,F,(XCO)= F2;(Xco)/Fco. This can be 
seen directly, or from the following facts: 
(i) Xco = Uw•i,X w hence F•,F(XCO) = colimw•i,F•,?(Xw), because F•,F is a 
left adjoint and thus preserves colimits. 
(ii) The quotient Fx(XCO)• F2;,F(XCO) is the unique map induced in the 
colimits from the quotients Fz;(X w) • FX,F(Xw), by their naturality. 
(iii) As for X-algebras, filtered colimits are computed in the category of sets 
[18], and in the category of sets finite limits commute with filtered colimits 
o [ 18]' given that each F w is by definition the kernel-pair of the natural quotient 
o 
Fz;(Xw)• F2;,F,(Xw), we have that Fco is the kernel-pair of Fx(XCO)• 
FZ,F(XCO)- 
These considerations also imply in the one-sorted case (i.e., when I= {1}, 
I* -- { 1} * • co) the well-known fact that varieties can be uniquely characterized by 
o 
congruences of the form Fco on Fz(Xco), i.e., by fully invariant congruences. Let• be 
an I-sorted signature. A congruence R on Fz(Xco) is called fidly invariant if for every 
pair (t,t')C Ri and for every finite family tj C F23(Xco)ij with 1•<j •< k such t at 
t,t' C Fz(Xil...ik)i one has (t(t 1 .... ,tk),t'(tl,...,tk)) • R i. Fully invariant 
congruences form a complete lattice under inclusion, denoted FIC(F23(Xco)). In the 
o 
one-sorted case, the map Fø• ['co associates a fully invariant congruence to every 
clone congruence onTZ. Conversely, given a fully invariant congruence R, we get a 
clone congruence •, = {Rn, 1 }nCco bytaking Rn, 1= R n FZ(Xn)2. These passages re 
324 J.A. GOGUEN and J. MESEGUER 
mutually inverse and give an isomorphism C0-Z)- FIC(Fz(Xco)). This follows from 
the definition of F ø and the following 
LEMMA. Let Z be a one-sorted signature and let l -'ø = {l-'•,l}n•co be a clone 
congruence on TZ. Then for every 0 • n • m we have 
(t,t') • F ø o n, 1 if and only ift,t' • FZ(Xn)and (t,t') • Fm, 1. 
PROOF. The direct implication follows for n = 0 from condition (d) in the 
definition of F ø and for n > 0 from condition (c) in the definition l -'ø and the fact that 
t(x 1 .... ,x n) = t, t'(xl,...,x n) = t'. The inverse implication follows for n = 0 from the 
"invariance of constant functions," axiom (iv) in the definition of clones, combined 
with condition (c) in the definition of F ø, which gives 
(t(t,..m.,t)),t'(t,..m.,t)) = (t,t') • FO, l-
The case n > 0 follows again from condition (c) and the fact that 
n m- t' ,n ro- t = t(xl,...,Xn,...,rkn ), =t'(x 1 ...,Xn,...,nxn).. 
For • a many-sorted signature, the passage from a fully invariant congruence 
R _C Fz(Xco) to a clone congruence an be defined just in the same way, 
• = {Rw, i }w,i•l* XI with Rw, i: R iC• FZ(Xw)i2 , 
and it is clear that F ø C Fco. But for III> 1 the equality Fø o _ o = Fco does not hold in 
general, and we shall call a clone congruence Fø faithful precisely when that equality 
does hold. It is easy to see that F ø is faithful if and only if for every v,v' • I* such that 
X v C X v, the induced homomorphism FZ,F(Xv) -•F F(X ,) is injective. - •], v
The first example in Section 1.2 gives a non-faithful clone congruence, since for 
Xe= 0 _C X a the induced homomorphism FZ,F(Xe)-• FZ,F(Xa) is not injectlye, 
because FZ,F(Xe) b = {T,F }, while in FZ,F(Xa) b we have T = F. The second example 
in Section 1.2 shows that one can also have F ø non-faithful when there are no 
constants in Z, i.e., when Ze,i=0 for all i•I, since for Xa= {{x]},•} C Xab =
{{x•},{xbl}} we have FZ,F(Xa) a = FZ(Xa) a = {on(x•)ln >• 1}, but in Fz,F(Xab) a we 
have on(x]) =o(x•) for all n •> 1. 
If one is only interested in the initial algebra FZ,F(O), then a clone congruence 
o 
F ø might not be faithful, but still FZ,F(O) could be recovered from Fco in case Pe, i = 
F ø -•Fz(O)i2 for all i6I; i.e., in case the unique homomorphism FZ,p(O)-> 
COMPLETENESS OF MANY-SORTED EQUATIONAL LOGIC 325 
Fz,p(Xco) isinjective. A clone congruence with this property shall be called initially 
faithful. We shall characterize those TZ for which all P ø are initially faithful. 
o 
REMARKS (i). From the definition of the maps P ø• Fco and R • R which 
assign a fully invariant congruence to a clone congruence and vice versa, it is easy to 
• O 
see that Rco = R for any fully invariant congruence R. Hence Fco is exactly the fully 
invariant congruence gen rated by F when considered simply asa subset of Fz(Xco) 2 
o (i.e., forgetting about he quantifiers). In other words, Fco is generated from F by the 
ordinary rules of equational deduction mentioned in the introduction (i.e., the 
variants of the rules (1) - (4) obtained by eliminating the quantifiers). Hence a clone 
congruence P ø is faithful if and only if an equation (t,t') belongs to P ø exactly when it 
is derivable from F by the ordinary rules of equational deduction. It is clear that the 
initial (Z,P)-algebra is definable in ordinary form in the sense mentioned in the 
introduction if and only if the clone congruence Pø is initially faithful. 
(ii) The above examples of non-faithful clone congruences exhibit some 
subtleties of the many-sorted case which do not appear for one-sorted algebras. If an 
algebraic description of the deduction rules is sought, clones are unavoidable because 
fully-invariant 1;-congruences are not fine enough to describe deduction rules. As 
mentioned in the introduction, awareness of this fact is essential for arriving at the 
right concept of variety and formulating correctly the many-sorted Birkhoff Theorem 
(it does not hold as stated in [14], where only the varieties definable by fully 
invariant congruences are considered). Indeed, if the set I of sorts is (as usual) finite, 
Birkhoff's Theorem will hold as expected for varieties in our sense, i.e., the classes of 
algebras closed under products, subalgebras, and quotients are exactly the varieties; 
however, if the set I of sorts is infinite, a fourth condition (namely closure under 
filtered colimits) has to be added. We now explain why the case I infinite is 
particularly subtle. Our notion of equation assumed a finite (I-sorted) set of variables 
in an equation 
(VX) t=t'. 
One could drop the finiteness condition for X but, for I finite, the apparent extra 
generality is vacuous since in that case for X arbitrary one can easily show, using the 
axiom of choice, that an equation 
326 J.A. GOGUEN and J. MESEGUER 
(VX) t=t ' 
is satisfied in an algebra iff the equation 
(VX') t=t' 
is satisfied for X' _C X a finite I-sorted subset with X i - 0 iff X i 0 and t,t' in F2;(X'). 
For I infinite such a subset X' does not exist in general, since then an I-sorted set may 
have all its components finite and fail to be finite itself. Thus there is an infinitary 
(only as far as quantification is concerned) extension of many-sorted equational logic 
that allows the definition of more general varieties for which Birkhoff's Theorem still 
holds with the usual formulation, but such generalized varieties are not in general 
closed under filtered colimits (a condition that always holds for varieties as defined in 
this paper). Here is a simple xample. Let I ={ inln G co} be a countable s t of sorts 
and let 2; consist of just two constants a,b of sort i 0. Let X be an I-sorted set with just 
one variable for each sort in and consider the variety defined by the equation 
(VX) a = b. 
The algebras A(n) with A(n)i0=(a,b} and with A(n)ik={C k} if 0<k•<n and 
A(n)ik= 0 if k >n, are all in the variety defined bythat equation and form an 
increasing chain whose union is clearly not in the variety. 
(iii) It is also easy to show the absence of functionally free algebras in certain 
varieties. Given a set I-' of equations, [21 ] defines an algebra A to be functionally free 
for I-' if an equation is satisfied by A iff it is satisfied by every algebra which satisfies 
all equations in F. Our first example in Section 1.2 shows not only that the ordinary 
rules of equational deduction are not sound, but also, contrary to the one-sorted case, 
that there is no functionally free algebra for some many-sorted varieties. The proof 
runs as follows' First observe that if there is a functionally free algebra, then there is a 
free algebra which is functionally free (this follows from the definition of functionally 
free and the fact that every algebra is a quotient of a free algebra). Next, for the first 
example of Section 1.2, observe that every free algebra with no generators of sort a 
satisfies the equation 
(V {{ A,A'},½)) A: A' 
and therefore cannot be functionally free. Similarly, observe that every free algebra 
COMPLETENESS OF MANY-SORTED EQUATIONAL LOGIC 327 
with at least one generator of sort a will satisfy the equation 
(VO) T= F. 
Finally, note that neither of these equations is true of every algebra satisfying the 
given equations. ß 
The following notions associated to an I-sorted signature 22 will be needed: i C I 
is quasi-isolated for 22 if and only if IF22(0)il •< 1. i C I is strict for 2; if and only if 
IF22(0)i[ •> 1. It is easy to see that i • l is quasi-isolated if and only if: 
(i) 122e, il •< 1; and 
(ii) if there xist o G 22v,i and r G 22w,i with v,w =• e, v = i I '- -i k, w = j I "'Jm' 
and with i I ..... ik andJl ..... Jm all strict, then they are also all quasi-isolated, v = w, 
o = r and 22e, i = 0. 
It is also easy to see that i G I is strict ifand only if either (i) 22e,i • 0 or (ii) there is a 
w = i I ..-i k •- e such that 22w,i • 0 and il,...,i k are all strict. 
THEOREM 1. Let 22 be an I-sorted signature. Then the following are equivalent: 
(i) Every clone congruence F ø _C T• is initially faithful,' 
(ii) Either every i C I is quasi-isolated, or every i G I is strict. 
PROOF. (ii) =• (i): Let h: F22,F(O) -• FZ,F(Xco) be the unique homomorphism. 
If IF22,F(O)i[ •< 1, then h i is of course injective. So we can reduce tothe case in which 
all i • I are strict and there xists an i • I such that IF22,F(O)i[ > 1. Let hen [t],[t'] • 
o F22,F(O) i and suppose that h[t] = h[t'], i.e., that (t,t')C Fw, i for some w • I* If 
w = e we are done. Otherwise, let w = il'"i k. By hypothesis we have tij • FZ(O)ij for 
1 •<j •< k. But, by condition (c) in the definition of F ø and the "invariance of constant 
functions," axiom (iv) in the definition of clones, this gives 
(t,t') = (t(til ,...,tik),t'(til ..... tik)) 6r;, i, 
i.e., [t] = [t'] in F22,F(O) i and hence h i is injectire. 
(i) =• (ii). Let 22 be a signature such that there exist i,j • I with t 4: t' C F22(0) i 
and F22(O)j = O. Let F ø be the clone congruence generated by the single equation Fi,i= 
((t,t')}. As F22(0) trivially satisfies Fj, i we have F22(0)= FZ,F(O), but F ø is not 
initially faithful because the unique homomorphism h: F2;,F(O)• FZ,F(Xco) 
identifies t and t'.ß 
328 J.A. GOGUEN and J. MESEGUER 
Recall that a 23-algebra A is reachable ,ff the homomorphism F23(0)-> A is 
surjective. We can now give the following model-theoretic version of Theorem 1' 
COROLLARY. Let 23 be an I-sorted signature. Then the following are 
equivalent.- 
(i) Every clone congruence F ø _C I2 Zis initially faithful,' 
(ii) For every reachable 23-algebra A, if some A i is empty, then [Ai[ •< 1 fi?r every 
PROOF. Since every reachable algebra is a quotient of F23(0), (ii) is equivalent 
to 
(iii) If some F23(0) i is empty, then IF23(0)il •< 1 for every i.
This can be rephrased by saying that if there is a non-strict sort, then all sorts are 
quasi-isolated. Thus, (iii) is equivalent to condition (ii) in Theorem 1.w 
We shall now characterize those signatures 23 for which every clone congruence is 
faithful. 
THEOREM 2. Let F be an k-sorted signature. Then the following are equivalent.' 
(i) Every clone congruence F ø __C TZ2is faithful,' 
(ii) For every w G I* - {e} and iG I, we have FZ(Xw) i 4 = 15; 
(iii) For all i,j G I we have F23(Xj) i 4 = O. 
PROOF. Because for any w G I* - { e} we have X i _C_C X w for i any of the letters 
occuring in w, this induces a map F23(X i) -> FZ(Xw); therefore (ii) 4, (iii). 
(i) =• (iii). Assume that there xist i•j G I such that Fz(Xj) i = 0- This implies that 
F23(Xjj) i = O, because th re is a homomorphism Fz(r):F23(Xjj) -> F23(X j) induced by
ß . 
the map r:Xjj -> Xj which sends xl,x• to x• for sort j, and is the identity map for the 
set 0in all the other sorts. Define F by the single equation Fjji,  ={ (xi,xJ2)}. We have 
Xjj __C Xjj i but Fz(Xjj) satisfies F trivially, so the induced map F23,i,(Xjj)= F23(Xjj)-> 
F23, F(Xjj i) identifies x i and xJ2 and therefore is notinjective. 
(ii) =• (i). Suppose thatthere exists F ø _C T• not faithful, i.e., we have v,w G I* 
o o 
and j G I such that X v _C Xw, t,t' G F23(Xv)j, (t,t') G Fwd and (t,t') • Fv• j.Assume 
v = e. By the previous theorem we conclude 3 i C I such that FZ(0) i = O. This forces 
F23(Xj)i= 0 as desired, because if t"C F23(Xj) i then t"(t)• FZ(0) i which is a 
contradiction. So we may assume v 4 = e. As we saw in the proof of the Completeness 
COMPLETENESS OF MANY-SORTED EQUATIONAL LOGIC 329 
Theorem, the derived operations 
F2;, F(Xv)v(t), F2;,F(Xv)v(t'): F2;, F(Xv )v • F2;, F(Xv)j 
are necessarily different. On the other hand we have 
F2;,p(Xv)w(t) = F2;,F(Xv)w(t'): F2;,p(Xv)W -> F2;,p(Xv) j 
by hypothesis. Now ifv = i 1 '-oi kthen this ays that F2;,p(Xv)im =/= 0 for m = 1,...,k 
(otherwise w  would have F2;,F(Xv)V = 0,and the two derived operations would be 
,. il equal). Since XvC Xw we have for t,t'G F2;(Xv)j= (TE)v, j and xil ..,Xni 1 
F2;(Xw)il = T2;w, il and xik •k G F•2(Xw)ik = T•2w,ik (where as before nih is the 1 ""' nik 
number of occurrences of i h inv) that the substitutions t t(xll ik t' = , .... xnik), = 
t,(xill ik G F2;(Xw) j = T2;w, j are transformed into substitutions of fu ctions by .... ,Xni ) 
the clone map F2;,F(Xv): T2; -• O(F2;,F(Xv) ). In other words, we have the diagram 
F2;,p(Xv )w•
i 1 ' , (rr  ..... rr •l•k) FZ,F(Xv)w( t 
F2;,r,(Xv)v(t  
F2;,F(Xv )v & >) F2;,r(Xv) j 
F Z,F(Xv)v(t') 
Consequently the function (rr• 1, ik cannot be surjective. But asthere are no 
-.-;rnik) 
repeated variables in thelist xll inkik ,...,x this can only happen if for some index i 
occurring  w (and not occurring  v) we have F2;,F(Xv) i = 0. Hence F2;(Xv) i =
COROLLARY. Conditions (i) - (iii) in Theorem 2 are all equivalent to the 
following model-theoretic condition: 
(iv) For every 2;-algebra A,if some A i is empty, then every A i is empty. 
PROOF. (ii)• (iv) is exactly (2)• (3), given in the proof of Theorem 3 in 
Section 5.. 
REMARK. Condition (iii) in the last theorem is automatically satisfied if the 
signature 2; is "strict," i.e., if every i G I is strict. Strictness is not necessary for (iii) to 
hold: take for example, I = { a,b}, 2;a,b = {c•}, and 2;b,a = { r}. However, if condition 
(iii) holds and one of the sorts is strict, then all the sorts (and hence 2;) are strict. To 
see this, assume t GF2;(0) i = T2;e, i and for each j G I let t' G F2;(Xi) j =(T•)i, i. Then 
330 J.A. GOGUEN and J. MESEGUER 
t'(t) G (Tz)e, j = FZ(0) j. Hence FZ(0) j % 0- 
5. One-sorted representation of many-sorted algebras. In his comments to a 
previous draft of this paper, Professor Saunders Mac Lane kindly brought to our 
attention Barr's paper [1]. This section explains the relationship between Barr's 
results and those in Section 4. The outcome of this comparison can be informally 
summarized in the following statement which further clarifies the differences between 
one-sorted and many-sorted algebras: 
For a many-sorted signature Z the following are equivalent: 
1. The ordinary rules of equational deduction are sound and complete. 
2. •-algebras can be "faithfully represented" as one-sorted algebras. 
We will presently make precise the meaning of "faithfully represented" in the above 
statement. Let 2; be an I-sorted signature. Then there is a "forgetful functor" 
UZ: Alg Z--> Set I 
sending each Z-algebra A to its underlying 1-sorted set { A i} and each 
Z-homomorphism f to its underlying I-sorted function { fi}' For a variety Algz, F this 
forgetful functor restricts to a functor 
UZ,F: Algz,F • Set I. 
There is also a "product functor" 
l-I: Set I --> Set, 
sending each I-sorted set {A i} to the cartesian product I1A i and each I-sorted function 
{ fi } to the function f i. 
DEFINITION. For Z and I-sorted signature, a variety AIgz, F defined by 
equations F is faithfully representable by one-sorted algebras if there is a one-sorted 
variety Algz,,F, and an equivalence [18] of categories V: AIgz,F-> AIgz,,F, 
(called the representation functor) such that the following diagram commutes: 
V 
AIgz, F > A!gz *,F* 
UZ'F I U2;*'F* 
Set I ) Set 
II 
COMPLETENESS OF MANY-SORTED EOUATIONAL LOGIC 331 
This definition requires that for each algebra A in the variety we can put an algebraic 
structure on the product I-IA i (its representation) in a"faithful way," i.e., one such 
that the original many-sorted algebra can be recovered from its one-sorted 
representation. Moreover, the definition asserts that the collection of all those 
representations and their isomorphic opies is a variety of one-sorted algebras. 
REMARK. Although this fact will not be used in the sequel, we note that if 
AIgz,,F, and AIgz;$,F$ are two varieties of one-sorted algebras representing Algz, F 
then the clones TE,,F, and TE$,F $ must be isomorphic and this makes the varieties 
themselves isomorphic over Set [ 16]. 
We now summarize those concepts and results of [ 1 ] which directly touch on the 
representability problem. Barr's results are very general, and our summary will only 
cover the applications developed in the last section of his paper. Barr calls a Z-algebra 
A = {A i } pure if and only if either all the sets A i are empty or all are nonempty. For 
AIgz;,F a variety, the full subcategory f med by its pure algebras is denoted PAlgz;,F. 
PAlgz;,F is not a variety ofAlg12 unless it coincides with Algz;,F itself; but we do have 
the following 
THEOREM([1, Theorem 5]). Tirere is a variety AIg2j,,F, of one-sorted 
algebras nd an equivalence of categories V: PAIgz, F ->AIgz,,F, such tltat the 
following diagram commutes 
V 
PAlgz, F ) Algz,,F, 
Algz;,F US*,F* 
Set I ) Set 
El 
REMARKS. (i) The need to restrict to pure algebras is is due to the fact that all 
information about an algebra A = (A i } is lost in the product rIA i when one of the 
components Aj is empty and another A kis not, since then IIA i= 0. 
(ii) To make the exposition simpler, we have changed the original formulation of 
332 J.A. GOGUEN and J. MESEGUER 
Barr's Theorem. Although it is not used in what follows, we summarize here the 
technical reasons why our formulation follows from Barr's: 
1. Up to isomorphism of categories, a monadic (tripleable) functor U: K-> Set 
-- -- 
that preserves filtered colimits i of the form U2;,,F,: Alg2;,,F, • Set for some 
one-sorted signature Z* and equations F* [9], Satz 10.3. 
2. The functors H: Set I • Set and UZ,F: AIgz, F -> Set I preserve filt red colimits 
[18] and PAIgz, F is closed under filtered colimits inside AIgz, F. 
The property 
PAlgz, F= Algz,F 
does not depend on F, i.e., it holds if and only if 
PAlg Z = Alg Z 
does. This is so because if a Z-algebra is not pure, then none of its quotients is pure 
either. Thus for any F, Alg2, V will contain a nonpure algebra iff Alg• does. We can 
now establish the connection between Barr's results and those of Section 4. 
THEOREM 3. Let • be an I-sorted signature. Then the following are equivalent.' 
1. Every clone congruence F _C T• 2is faithful,' 
2. For every w E I* - (e} and i E I we have F2(Xw) i :/: 0; 
3. PAlg• = Alga; 
4. Each variety Alga, F __C Alg• is faithfully represented by one-sorted algebras. 
PROOF. (1) o (2) was proved in Theorem 2. 
We claim that (2) o (3). (3) =• (2) follows easily from the definition of pure 
algebra and is left to the reader. To see that (2)=• (3), first notice that, since pure 
algebras are closed under quotients and every algebra is a quotient of a free one, it is 
enough to show that all free algebras are pure. Then, recall that, as already stated in 
the last remark, pure algebras are closed under filtered colimits. Since every free 
algebra is a filtered colimit of finitely generated free algebras, it will suffice to show 
that all finitely generated free algebras are pure. Condition (2) implies that all finitely 
generated algebras are pure, except perhaps for the initial algebra. The proof that (2) 
implies that the initial algebra is pure was already given (but without that 
terminology) in the last remark of Section 4. 
(3) =• (4) follows from Barr's Theorem above, so we will finish the proof if we 
COMPLETENESS OF MANY-SORTED EQUATIONAL LOGIC 333 
show that (4) =• (3). Suppose that (4) holds and let A be a nonpure Z-algebra. Then 
IIA i-- 0, but some Aj :/: 0. This gives a contradiction, si ce we can then exhibit an 
algebra A' such that A • A' but such that IIA i' -- 0. Indeed, if Aj has more than one 
element, we can form a quotient of it identifying all the elements of sort j; otherwise, 
let x be a variable of sort j and let A' -- F•(A ß (x•), where A ß (x• is the l-sorted 
set obtained by attaching x to the carrier of A. Since the cardinality of Aj is different 
from that of F•(A t9 (x•})j we have A • A'. However, A' is a nonpure algebra, since 
we can get a surjective homomorphism t'•: F•;(A • •x•) --> A induced by the I-sorted 
map f: A ß •x• --> A that is the identity on A and maps x to the only element of Aj.m 
ACKNOWLEDGEMENTS. We wish to thank Gerard Huet for stimulating our 
curiosity about the anomalies of many-sorted equational logic. A previous draft of the 
paper benefitted from the criticism of Professor Saunders Mac Lane who led us to 
explore the connections with the work of [1], and pointed out that similar 
precautions had been taken by [3] in the context of higher-order logic. We are also 
grateful for the excellent comments of an anonymous referee, leading to substantial 
improvements in the exposition. Finally, we wish to thank Kathleen Goguen for 
extensive help with preparation of the manuscript. 
REFERENCES 
1. Barr, M., The point o.f the empty set, Cahiers de Topoloeie et Geometrie Differentielle, 
13(1972), 357-368. 
Benabou, J., Structures algebriques dar•v les categories, Cahiers de Topologie et Geometrie 
Differentiel, 10(1968), 1-126. 
Boileau, A., and Joyal, A., La Logique des Topos, J. Symbolic Logic, 46(1981), 6-16. 
Burstall, R. M., and Goguen, J. A., The Semantics of Clear, a Specification Language, in 
Proceedings of the 1979 Copenhagen Winter School on Abstract Software Specification, 
Springer-Verlag, 1980, 292-332, Lecture Notes in Computer Science, Volume 86. 
5. Burstall, R. M., and Landin, P. J., Programs and their Proofs: an Algebraic Approach, in B. 
Meltzer and D. Michie (eds.), Machine Intelligence 4, University of Edinburgh Press, 1969, 
17-43. 
Cohn, P.M., UniversalAlgebra, Harper and Row, 1965, Rev. ed., 1980. 
Ehrich, H.-D., On the theory of specification, implementation and parameterization of abstract 
data types, J of Assoc. for Computing Machinery, 29(1982), 206-227. 
Ehrig, H., Kreowski, H.-J., and Padawitz, P., Algebraic Implementation of Abstract Data Types, 
Tectmical Report, Technical University of Berlin, 1979. 
Gabriel, P., and Ulmer, F., Lokal Prasentierbare Kategorien, Lecture Notes in Math., Vol. 221, 
Sr•ringer-Verlag, 1971. 
10. Goguen, J. A., and Burstall, R. M., Introducting Institutions, in E. Clarke and D. Kozen (eds.), 
334 J.A. GOGUEN and J. MESEGUER 
Proceedings, Logics of Programming Workshop, Springer-Verlag, Lecture Notes in Computer 
Science, Vol. 164, 221-256. 
11. Goguen, J. A., and Meseguer, J., Universal Realization, Persistent Interconnection and 
Implementation of Abstract Modules, in Proceedings, 9th International Colloquium on 
Automata, Languages and Programming, Lecture Notes in Computer Science, Springer-Verlag, 
1982. 
12. Goguen, J. A., Thatcher, J. W., and Wagner, E., An Initial Algebra Approach to the 
Specification, Correctness and Implementation of Abstract Data Types, in R. Yeh (ed.), Current 
Trends in Programming Methodology, Prentice-Hall, 1978, 80-149; Original Version, IBM, T. J. 
Watson Research Center Technical Report RC 6487, October, 1976. 
13. Guttag, J. V., The Specification and Application to Programming of A bstract Data Types, PhD. 
Thesis, University of Toronto, 1975, Computer Science Dept., Report CSRG-59. 
14. Higgins, P. J., Algebras with a scheme of operators, Mathematische Nach., 27(1963), 115-132. 
15. Kutzler, B., and Lichtenberger, F., Bibliography on Abstract Data Types, 
Springer-Verlag, 1983, Informatik-Fachberichte, Volume 68. 
16. Lawvere, F. W., Functorial Semantics of Algebraic Theories, Proceedings, Nat'l. Acad. of 
Sciences, 50(1963), Summary of Ph.D. Thesis, Columbia University. 
17. __, Introduction, in Model Theory and Topoi, Lecture Notes in Math., Volume 445, 
Springer-Verlag, 1975, 3-14. 
18. Mac Lane, S., Categories for the Working Mathematician, Svringer-Verlag, 1971. 
19. Meseguer, J., and Goguen, J. A., Initiality, Induction and Computability, in M. Nivat and J. 
Reynolds (eds.), Algebraic Methods in Semantics, Cambridge Univ. Press, 1985. To appear, also 
available asSRI CSL Technical Report 140, December, 1983. 
20. Mosses, P., Modular Denotational Semantics, Technical Report, Aarhus University, Computer 
Science Dept., Aarhus, Denmark, 1979. 
21. Tarski, A., A remark on functionally free algebras, Annals of Math., 47(1946), 163-165. 
22. Zilles, S., Abstract Specification of Data Types, Technical Report 119, Computation Structures 
Group, MIT, 1974. 
SRI Intemational 
Menlo Park, California 94025 
Stan ford University 
Stanford, California 94305 Received June 15, 1982 
Revised Version Received September 8, 1984 
