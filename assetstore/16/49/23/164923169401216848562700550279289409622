Algebra Universalis, 30 (1993) 27-52 0002 5240/93/010027-26501.50 +0.20/0 
9 1993 Birkh/iuser Verlag, Basel 
Generalized varieties 
NIKOLAI WEAVER 
0. Introduction 
We wish to generalize to arbitrary structures as much as we can of the theory 
of varieties from universal algebra. This or something similar has been attempted 
several times already, e.g. in [1], [3], [4], [5], [7], [8], [1~, [18], [21], [26]; in 
particular, the production of category-theoretic generalizations of Birkhoff's theo- 
rem that varieties are equationally definable, seems to be a minor industry, e.g. see 
[1], [2], [11], [12], [20], [22]. We admit that many of these papers have strongly 
influenced our approach, and although our main results are new, we will bring in 
many ideas from the literature. 
At first sight, in the context of structures (sets equipped with operations and 
relations) there seems to be an obvious generalization of almost every basic 
universal algebraic notion ("homomorphism," "subalgebra,"~ direct product," 
etc.). This leads to a simple theory for structures which actually works very easily; 
we will review it in Section I, or see [18, chapter 31]. For instance, generalizing the 
class operators H, S, and P, one has the result that a class of structures of the same 
type is closed under H, S, and P iff it is definable by atomic formulas. (An atomic 
formula is either an equation tl ~ t2 or an inequation r ( t l , . . .  , tk), where r is a 
relation symbol and the t i are terms.) But there are two big problems with this 
theory: (1) Aside from the many interesting purely algebraic varieties which we 
already know about (such as groups, rings, lattices, and so on), there are absolutely 
no examples of interesting classes of structures which are closed under H, S, and P! 
In particular, none of the most important nonalgebraic classes - graphs, ordered 
groups, valuation rings, e tc . -  are closed under the formation of homomorphic 
images. (2) This theory is so similar to standard universal algebra that it is not even 
technically interesting; one gains no new insight from it because almost nothing new 
or surprising happens. Thus our original problem is not so easily solved. 
Presented by W. Taylor. 
Received April 18, 1990; accepted in final form May 14, 1991. 
27 
28 NIKOLAI WEAVER ALGEBRA UNIV, 
Looking at the first criticism, one gets the idea to forget closure under H and think 
about classes of structures closed only under/ ,  S, and P. This is done in [2], [I 1], 
[12], for example. One obtains the significant result that such classes are precisely 
those definable by formulas of the form 
where 9 and the ~i are atomic formulas and the premise is allowed to be infinite, 
or to be empty. We call such formulas implications, and the classes they define 
prevarieties. (Actually, this result appears not to have ever been stated explicitly, 
although its specialization to algebras - when 4~ and the ~b i must be equations - ap- 
pears in Banaschewski-Herrlich [2] and Mal'cev [18, chapter 4]. But the general case 
has the same proof as the algebraic ase.) 
Those prevarieties which are actually definable byf in i te  implications are none other 
than the quasi-variet ies of Mal'cev, who showed that these classes are precisely those 
which are closed under/ ,  S, and PR - see [17, chapter 5] and [18, chapter 31], or 
[6, w (PR is the operator which forms reduced products, a.k.a, filtered products. 
Unlike [6], we allow the filters involved to be improper; this is why their statement 
of the result is slightly different.) 
Because HSP = HSPR,  both pre- and quasi-varieties become plain varieties when 
one adds the requirement of closure under H; and both are useful generalizations 
of the notion of a variety. The former includes many, many well-known classes of 
structures, uch as topological algebras, metric spaces, and so on (see Section IV); 
while the latter, which still includes interesting classes like ordered algebras and graphs, 
is nicer to deal with because it is in a sense more finite (see Section V). However, 
one has the following complaint. We know that varieties are the most interesting 
classes of algebras, but neither of the above notions reduces, in the algebraic ase, 
to the notion of a variety. Thus one feels that these notions may be too broad, or, 
to be more positive, that there may exist a more special notion which is closer to the 
notion of a variety, yet still captures all of the interesting classes of structures. 
In the present paper we offer a notion which fits this description. Consider the 
following. According to the standard efinition, a homomorphism ~b from d to 
(these are structures) must commute with the operations and is required to preserve 
the relations in the sense that 
rd (a l ,  . . . , ak) implies r~(~(a l )  . . . . .  dp(ak)). 
We introduce the stronger condition 
r~(a l ,o   9  ak) if and only if r~(~b(al) . . . . .  ~b(ak)), (*) 
Vol. 30, 1993 Generalized varieties 29 
and we call homomorphisms satisfying this condition , -homomorphisms. More 
interesting than ,-homomorphisms, however, is the class operator H* associated 
with them; it is interesting because all of the most important classes of structures 
are closed under H*. We therefore define a *-variety to be a class of structures 
closed under H*, S, and P (which specializes the notion of a prevariety). We also 
define a reduced ,-variety to be a class closed under H*, S, and PR (which 
specializes the notion of a quasi-variety). 
There are syntactic haracterizations of ,-varieties and reduced ,-varieties which 
may be more palatable than the above definitions. Let a *-implication be a formula 
of the form 
where the gs are inequations (recall this means atomic formulas of the form 
r(t~ . . . .  , tk)) and ~ is an atomic formula. Then ,-varieties are precisely those 
classes which are definable by ,-implications, and reduced ,-varieties are precisely 
those definableby finite ,-implications. (See Section II.) 
For example, the class of partially ordered sets ("posers") is a reduced ,-variety; 
it is definable by the ,-implications 
XNX 
(x<yAy<- -x )  ~ x~y 
(x<- -yAy<- -Z)  ~ X<Z.  
The class of ordered groups is also a reduced ,-variety; it is definable by the axioms 
for groups, the above axioms for posets, and the ,-implications 
x <y ~ xz  <yz  
x < y ~ zx  <- zy. 
We will give several other examples of ,-varieties and reduced ,-varieties in Section 
IV. It is rather remarkable that one never seems to need equations in the premise 
of defining axioms; that is, all of the familar classes which are definable by 
implications are actually definable by ,-implications. 
We suggest three advantages to our approach. (1) Although ,-varieties are more 
special than prevarieties, virtually every interesting prevariety is in fact a ,-variety. 
The same goes for reduced ,-varieties vs. quasi-varieties. That is to say, our notions 
still contain all of the interesting classes. (2) In the algebraic case, both of our 
30 NIKOLAI WEAVER ALGEBRA UNIV, 
notions are identical to the usual notion of a variety, overcoming the complaint we 
made earlier. (Note that in this case ,-homomorphisms are the same as homomor- 
phisms, and ,-implications must have an empty premise hence are the same as 
equations.) (3) Because ,-varieties (reduced ,-varieties) are more special than semi- 
varieties (quasi-varieties), one hopes to prove stronger theorems for them. We have 
two theorems which realize this hope, Theorems 6 and 7 in Sections V and VI below. 
The outline of the paper is as follows. In Section I we set definitions and review 
the naive theory described at the start of the introduction. In Section It we prove 
the syntactic haracterization f ,-varieties and reduced ,-varieties (a.k.a. preserva- 
tion theorems) described above. In Section III we discuss the role played by 
homomorphisms in our theory. In Section IV we give examples of ,-varieties. In 
Section V we give a Birkhoff-like subdirect representation theorem, with applica- 
tions, and a J6nsson-like structure theorem (both for reduced ,-varieties). In 
Section VI we prove a Mal'cev-like theorem for ,-varieties. In Section VII we 
discuss proof theory. In Section VIII we state some (to us) interesting problems for 
future investigation. 
I. Basic definitions and a naive theory 
We begin with some definitions taken from Gr/itzer [10, w A type ~ is a pair 
of sequences ({n~ }~< o,, {m~ }~ < o2), where ol and o2 are ordinals (which depend on 
9 ) and the n~ and m~ are natural numbers. Corresponding to ~ we have a sequence 
{f~ }~<ol of function symbols and a sequence {~ }~ <o2 of relation symbols. Through- 
out the rest of the paper, we will suppose that the type in question is always some 
arbitrary, fixed type 1:, except when we discuss specific examples in other types. 
f~' of A structure d of type ~ is a triple (A; o~, N) ,  where ~ is a class { ~ }~<ol 
operations on A and ~ is a class {r~ }~ < o2 of relations on A, such that eachf~ has 
rank n~ and each r~ has rank ms. A is assumed to be nonempty and is ten,ned the 
universe of ~r If Ol = 0 then ~ is termed a relational structure, and if 02 -~ 0 then 
d is termed an algebra. 
A structure .~ is a substructure of d if its universe is a subset of ~ 's  and its 
operations and relations are the restrictions of d ' s .  For this we write ~ -< d .  
A function 4 from d to ~ is a homomorphism if for all c~ < ol, 
q~( f~(a l , . . . ,  a,~)) =f~(r  . . . . .  q~(a,~)), 
and for all ~ < oz, 
r f  (al, . . . , am~) implies r~((a(al) . . . .  , ck(a,~,)). 
If q~ is one-to-one and its inverse is a homomorphism, then q~ is an isomorphism. 
Vol. 30, 1993 Generalized varieties 31 
Corresponding to the notion of homomorphism we can define a congruence 
relation on ~r in the usual algebraic way to be an equivalence relation 0 on A with 
the property that for all ~ < o~, 
a . . . .  alObl . . . .  , a, Ob,~ implies f~ ( 1, ., an~)Of~(bl, . ,  b,~). 
(This is not done by Gr/itzer, but various other writers, e.g. in [5] and [22], have 
made this definition.) There is no condition involving relations. The congruences on 
d make up a complete, algebraic sublattice of the lattice of equivalence r lations on 
A. If 0 is a congruence on d then the quotient d /O  has universe A/O, with 
operations defined in the natural way, and with relations defined by (for 
A~, . . . , Am~ ~ A/O) letting r~/~ . . . , A rn~)  hold iff there exist a ie  Ag such that 
r f  (al . . . .  , am~) holds. 
The direct product of a collection of structures {sr = {(Ai; ~ ,  Ni)} is the 
structure d = [-I d~ with universe l-[ Ae, with operations f f  defined by 
f ~ (a, . . . . .  an~)(i) = f f i(a, (i), . . . , a,~(i)) 
and with relations r~ defined by 
r~(al  . . . . .  am~)  iff r~(a l ( i )  . . . . .  am~( i ) )  for all i. 
Suppose that ~ -< I-[ d i ,  and that for each i the natural projection n i takes 
onto d i ;  then we say N is a subdirect product of the collection {di  }. If when- 
ever ~ is isomorphic to a subdirect product of a collection {di} by a map ~b, 
it is isomorphic to some sJ~ by the map n~ o qS, then we say r is subdirectly 
irreducible. 
Given a set of structures {di  }, i e I, and a filter ~- on I, the reduced product 
over ~ is algebraically the direct product with two elements identified iff they agree 
on almost every coordinate, and with a relation holding iff it holds on almost every 
coordinate. ("On almost every coordinate" means "on a set of coordinates which 
belongs to ~.~.") 
Let ~ be a class of structures. We define I(s() to be the class of all structures 
isomorphic to elements of Js S(J() to be the class of all substructures of elements 
of ~ ,  H(oU) to be the class of all homomorphic images of elements of Off, P(~U) 
to be the class of all direct products of subsets ( ,  Ps(~)  to be the class of all 
subdirect products of subsets ~{', and PR(~U) to be the class of all reduced products 
of subsets of s(.  
In general, we attach the prefix "algebraic" to indicate that a term applies 
only to operations. For instance, an algebraic isomorphism from (A; Y,  ~)  to 
32 N1KOLAI WEAVER ALGEBRA UNIV. 
(B; (4, 5 a)  means an isomorphism from (A;o~, ~)  to (B; (#, ~) ;  an algebraic 
congruence simply means a congruence. 
The notions of homomorphism, congruence, tc., have relatively little to do with 
the relations on a structure; for this reason, with these definitions the theory of 
structures is not very different from the theory of algebras. However, this theory 
has been put forward by Mal'cev [18, chapter 31] and in a special case by Bloom 
[3]. We will spend the rest of the section briefly going over this subject: Except for 
the next remark, what follows is not used in any later section. 
We begin by remarking that for the map 49 : ~r -~ 1--I ~r to be an isomorphism, 
it is necessary and sufficient hat each ~ o ~b be a homomorphism, that for each 
a, b ~ sO, a r b, some lr i o 49 separates a and b, i.e. zc i o ~(a) r ni o ~b(b), and that for 
each a and a l , . . . ,  ~,,= e d with ~ rf(a~ . . . . .  a,,=), Some rc~o 49 preserves the 
failure of this relation to hold on these values. We will use this observation several 
times. 
The term algebra T over a generating set X is defined in the usuaI way. Given 
a class J (  of structures, we know that any map (b0 : X ~ ~r into a structure in Jg 
extends to an algebraic homomorphism 49 : T ~ sO. For each such map we can 
define relations er r  on T by setting 
9- 
4~r~ (ti . . . .  , tm~ ) iff r~(~(t,)  . . . . .  (O(tm=)). 
With respect o these relations q) is a homomorphism. Let 0 = ~ ker q~, and for 
~- Then 0 is a congruence on f (T, { r f} ) ,  so let each a let r  =~ 9- ,p r~ . = 
y '  = 9 - to .  
We call Y '  the a~f-free structure over X, and note that it has the universal 
mapping property: any map (a'o:X/O ~sr  where .4 ~-Yf, uniquely extends to a 
homomorphism qV : ~- '~r  To show this we first lift 496 to a map ~bo : X~,  
then extend q5 o to an algebraic homomorphism q) on T, and finally define 
(o'(t/O) = q)(t). The map 49' is well-defined since if t~/O = t2/O then by the definition 
of 0 we must have 4~(tl)= 49(t2). It is an algebraic homomorphism since 49 is. 
Finally, it is a homomorphism since if r f ' ( f i /O , . . . ,  t,,=/O) holds then by the 
definition of 0, r f  holds for any selection of equivalence class representatives, so we 
must have r f ( t l  . . . .  t,==) and hence also ~rf ( t l , . . . ,  t,,,~), which implies that 
r~(q)(t~) . . . . .  4)(tm=)), and since 4)(ti)=4'(ti/O) we are done; r~(4'(q/O), 
. . . ,  49'(tm,/0)) holds and so qS' preserves relations. 49' is unique since Z/0 generates 
~--z.  
Also, J - '  e ISP(~,U), since by the definition of 0, for every tl/0 r ~2/0 there exists 
a homomorphism 49:Y--> d into a structure in ~Y" with 4(t~) r 4~(t2), hence there 
exists a homomorphism q~' :Y - '~sr  with 49'(tl/O)r and for every 
~rf ' ( t l /O,  . . . ,  tm=/O) there exists a q5 with ~ rJ(O(tt) . . . .  ,49(tin=)), hence a 49' with 
Vol. 30, 1993 Generalized varieties 33 
~rf ($ ' ( t l /O)  . . . . .  4)'(tm,/O)). By the remark made a few paragraphs back this is 
enough to ensure we have an isomorphism from ~'  into a product of structures 
in ~f'. 
Now we consider atomic formulas, defined in the introduction. We say that a 
structure d satisfies an atomic formula ? over a generating set X if 7 is true in 
every interpretation X ~ d .  If ~ is a class of structures, then we say of" satisfies ?
if every d e off satisfies ?. The collection S + of all atomic formulas which are 
satisfied by some class J f  is termed the atomic theory of of,  and the collection F + 
of all structures which satisfy some set F of atomic formulas is termed the atomic 
class of F. 
It is easy to verify that if W satisfies an atomic formula ?, then so do H(W), 
S(J{), and P(~#). Also, any structure which satisfies the atomic theory of ~ is in 
HSP(N/'); to see this, let d be such a structure and let ~--' be the ~- f ree  structure 
arising from the term algebra T over the generating set A ( = the universe of d ) .  
We can extend the identity map on d to an algebraic homomorphism ~b from T 
to d ,  and then let qV : Y-' ~d  be given by 4)'(t/O)= ~b(t). This is well-defined, 
since if q/O = t2/O then the equation t~ ~ t2 must be in the atomic theory of ~f-, 
and hence q~(tl)= ~b(t2). Once we know that ~b' is well-defined, it is an alge- 
braic homomorphism trivially; and then it is a homomorphism since if 
rf ' (tt /O . . . . .  tm~/O ) holds then the inequation f~(tl . . . .  ,tm,) must be in the 
atomic theory of X ,  and so we have that rf(d?(t~) . . . .  ,(O(tm~)) hence 
rf(c~'(tl/O) . . . . .  dp'(tm~/O)) must hold. Thus d el l (C- ' ) ,  and since, as we ob- 
served above, Y - 'e  ISP(Yf),  we have our conclusion. The upshot of this para- 
graph is the preservation theorem that a class of structures is closed under H, S, 
and P if and only if it is an atomic class. 
We conclude this section by remarking again how similar the above arguments 
are to their counterparts in the study of algebras. Because the notions depend so 
little on the relations in a structure, the resulting theory does not deal with general 
structures in a meaningful way. For example, consider the type which has no 
operations and one binary relation -<. Since there are no terms besides the 
individual variables, the only possible atomic formulas (up to different variables) 
are x ~x  (vacuous condition), x ~y  (triviality), x < x (reflexivity), and x-< y 
(diversity). Hence, from the preservation theorem of the preceding paragraph, 
there are by inspection only five "varieties" (i.e., classes closed under H, S, and P) 
in this type: (1) the class of all one-element sets with a reflexive relation; (2) the 
class of all one-element sets; (3) the class of all sets with a diversity relaton; (4) 
the class of all sets with a reflexive relation; and (5) the class of all sets with any 
binary relation. This theory is too sparse to be very interesting. (We will see at the 
end of the next section that there are infinitely many *-varieties in the type with 
no operations and one binary relation.) 
34 NIKOLAI WEAVER ALGEBRA UNIV. 
II. New definitions and main results 
In this section we prove the preservation theorems described in the introduction. 
Dixon [7] proved some theorems which closely resemble ours; but in his formulas 
all of the variables in the premise are distinct, which makes for a much less 
expressive theory in which one cannot describe, e.g., the class of posets. Also see [ 1], 
[2], [3], [4], [8], [ll l, [12], [171, [18], [20], [21], [221, [26]. 
A ,-komomorphism is a homomorphism ~b: d ~ N which satisfies the condition 
r~(a 1 . . . . .  am~ ) if and only if r~(~b(al) . . . . .  ~(am~)). (*) 
We define H*(X') to the class of all ,-homomorphic images of elements of ~,~f. 
Notice that a ,-homomorphism is no different from an isomorphism (which is: 1-1 
is antisymmetric and its correspond- 9 -homomorphism) if some binary relation r~ 
ing r~ is reflexive, since this and the above condition imply 1-1. Also notice that 
given any ,-homomorphic mage of a relational structure, we can pick one element 
out of each block of the kernel, and thus create a substructure isomorphic to the 
9 -homomorphic mage. So in this case H* <- IS. 
We point out that in general, products of structures do not map ,-homomorphi- 
cally onto their factors. For example, in the above case when H* = I (which arises, 
for instance, when X is the class of posets) any finite, nontrivial structure ~ is not 
a ,-homomorphic image of ~r because it has smaller cardinality. However, 
products do map homomorphically onto their factors. 
A congruence relation 0 on A is a ,-congruence relation if for all e < o2, 
alOb 1 . . . . .  am Ob,,~ implies r~(a 1 . . . . .  a,,,~) ,~v r f (b l  . . . . .  bm~). (~) 
Notice that kernels of ,-homomorphisms are ,-congruences, and every ,ocongru- 
cence is the kernel of the natural ,-homomorphism onto the quotient structure. The 
usual homomorphism theorems hold for ,-homomorphisms and ,-congruences. 
The *-congruence relations on ~r make up a sublattice of the lattice of 
equivalence relation on A; this sublattice is complete and hence algebraic. The 
identity relation A is always a *-congruence, but in general the diversity relation g 
is not. (It is, though, when s# is an algebra and the condition (J') is vacuous.) We 
write 1 d for the greatest ,-congruence on d .  Observe that (x ,y )e  ld  iff the 
algebraic ongruence O(x, y) generated by the pair is a ,-congruence. The proof of 
the backward irection is trivial, since if some *-congruence contains the pair then 
ld certainly must. To see the forward direction, notice that the condition (J') is 
preserved by refinement; so, if t~, contains the pair it must be coarser than 0(x, y), 
and then O(x, y) inherits (t). 
Vol. 30, 1993 Generalized varieties 35 
If d < I-[ d i  and each ~i takes d onto ~ i  ,-homomorphically (as we noted a 
few paragraphs back, this need not be the case even if each re; is onto), then we say 
~'  is a ,-subdirect product of the collection {d~ }. We write P * (~)  for the class of 
all ,-subdirect products of subsets of ~ .  If whenever d is isomorphic to a 
9 -subdirect product of {A~ } by a map 4~, it is isomorphic to some d~ by the map 
~zi o ~b, then we say s~ is ,-subdireetly irreducible. Notice right off that any structure 
d is the ,-subdirect product of ,-subdirectly irreducible structures. (A more 
interesting version of subdirect irreducibility will be given in Section V.) To prove 
this, for each a, b ~ d ,  a ~ b, use Zorn's lemma to get a ,-congruence relation 0~ 
maximal with respect to the property that (a,b)r Then the natural 
map d ~ I-I ~/oz is the desired expression of sJ as a ,-subdirect product of 
9 -subdirectly irreducibles. 
We remark that much of the complexity of some of our following proofs, as 
compared to the corresponding proofs for algebras, has to do with the fact that 
there is no natural " , -~- f ree  structure" with the ",-universal mapping property" 
for Y .  For instance, it is easily seen that there is no partially ordered set with the 
9 -universal mapping property over even two generators. Thus we often need to go 
through relatively complicated procedures to construct a suitable quotient of the 
term algebra, whereas in the corresponding theorems the algebras, one simply uses 
the X- f ree algebra. 
We are now ready to prove some preservation theorems. Recall the definitions 
of implications and ,-implications from the introduction. Let the *-implieational 
theory ~*  of a class ~f" of structures be the collection of all ,-implications which 
are satisfied by ~,  and let the ,-implicational c ass F* of a class F of ,-implications 
be the collection of all structures which satisfy F. Define finite ,-implicational 
theories ~ and finite ,-implicational classes F7 similarly, using finite ,-implica- 
tions. 
THEOREM 1. A class oU of structures is a ,-implicational c ass if and only if it 
is closed under H*, S, and P. 
Proof Consider the forward direction. Closure under S and P is standard. For 
closure under H*, suppose that d satisfies some ,-implication 7 and that 0 is a 
,-congruence on d ;  we want to show that d /0  also satisfies 7. The definition of 
,-congruences i so strong that whenever an inequation holds on the elements 
al/O . . . . .  ak/O in d /0 ,  then it must also hold on al, 9 9 9 ak in d ;  so if the premise 
of 7 is true in the interpretation t : X--, d /0 ,  then it is also true in the interpretation 
t' : X ~ d defined by t'(x) = some representative of l(x). Then since d satisfies 7, 
the conclusion of V must be true in t', and hence the conclusion is true in t ; that is, 
d /0  satisfies V. 
36 N IKOLAI  WEAVER ALGEBRA UNIV .  
Now for the backward irection. Suppose d satisfies the ,-implicationai theory 
X* ;  we must show ~r ~ H*SP(3( ) .  By the characterization f prevariefies given in 
the introduction, it is enough to show that d is the ,-homomorphic mage of some 
structure which satisfies the implicational theory â€¢ t  (the collection of all implica- 
tions satisfied by off). Let T be the term algebra over the generating set A (= the 
universe of d ) ,  and let q5 : T--* d be an algebraic homomorphism which is the 
identity when restricted to A. Define relations r f  on T by letting r f ( f i  . . . . .  t,,,~) 
hold whenever ~( r  ~b(tm~)) holds. Notice that J -=  (T, { r f} )  satisfies 
any ,-implication in cg* whose conclusion is an inequation, since d does and since 
~r is a ,-homomorphic image. Now define a ,-congruence relation 0 on 3- by 
setting t, Ot 2 if[" there is a ,-implication ~ ~ ~ff* over the set of variables A, whose 
premise is true in ~- in the natural interpretation (the identity map from A into 9-), 
and whose conclusion is t~ g tz. 
Let us verify that 0 is a ,-congruence r lation. First of all, it is reflexive since for 
any ~ the ,-implication ~ =~ r ~ t is in every ,-implicational theory. It is 
symmetric since if (A t  4~i) =~ tl ~ t2 is true in every interpretation i  a structure 
in X ,  then (/~t 451) =~ t2 ~ t~ must also be true in every such interpretation. And 
it is transitive since if (At  ~i) =~ t~ ~ t2 and (As ~)  =~ t2 g t3 are both true 
in every interpretation i a structure in J r ,  then (~z,~j q~;) =~ t~ ~ t3 must also 
be true in every such interpretation; and if the premises of the first two are true in 
the natural interpretation i  Y-, then the premise of the final one is also true in the 
interpretation. Next, 0 is an algebraic ongruence since ifs~Ot~, 1 <- i <- n~, then s~ ~ ti 
are the conclusions of ,-implications ~ E ~(* whose premises are all true in the 
natural interpretation i r so the ,-implication ~, which takes the premises of the 
~'s and concludes f~(s~, . . . ,  s,~)~f~(t~,, . . ,  t,,), must also be in .Y{* and its 
premise is true in the natural interpretation in Y-. so we get that 
J -  S . . . .  - -  f ~ ( ~, . ,  s~,,)Off (fi, . ,  t,,). Finally, 0 is a ,-congruence since if s t i r ,  1 < i ~ rn~, 
and ~ are as above, then the ,-implication 7' which takes all the premises of the yi's 
and the additional premise ?~(s~,... ,  Sin), and concludes ~(t~, . . . ,  tmo), must be in 
: f *  (since it is true in any interpretation i which the ~ are true, hence in any 
interpretation in a structure in ~4{'), so we get that r f ( s~, . . .  ,Sm~) implies 
r f (q  . . . . .  tin,). The same argument puts the implication in the other direction as 
well, and this completes the proof that 0 is a ,-congruence relation. 
Let ~--' = ~-/0. Then ~ is still a ,-homomorphic mage of ~-~ just as it clearly 
was of ~--; to prove this it is enough to show that the map ~' : J "  ~ .~r defined by 
4)'(t/O) = 4)(0 is well-defined. (We defined 4) at the start of the proof.) But if t~ Ot2, 
then there exists a ,-implication y ~ : f  * over the set of variables A whose conclusion 
is t~ ~ t~ and whose premise is true in the natural interpretation i .Y-. Then, since 
4) preserves relations, the premise of 7 must be true in ~r in the interpretation d~ ~ t, 
and hence since d satisfies V we must have 4)(t~) = 4)(t2), q.e.d. 
Vol. 30, 1993 Generalized varieties 37 
Finally, we show that r  satisfies f  t. It is clear that any ,-implication in ~*  
over the set of variables A whose conclusion is an inequation is true in the natural 
interpretation t : A ~ Y", since it is true in the natural interpretation (the identity 
map) from A into ~-. Also, by the construction of 0 any ,-implication in ~f* over 
the set of variables A whose conclusion is an equation is true in t. Now let 7' be any 
implication in j~fft, and suppose its premise is true in some interpretation z' in Y ' .  
From 7' form an implication 7 s of  t over the generating set A by replacing every 
variable x in 7' with a representative o f / (x ) ;  then the premise of 7 is true in l (since 
the premise of 7' is true in t'), and its conclusion is true in t i f f  the conclusion of 7' 
is true in / .  Now since each equation cb; in the premise of 7 is true in t, then by 
definition there must be some ,-implication 7i E s((* whose premise is true in t and 
whose conclusion is 4,.. So we can construct a ,-implication 70 e J~(* whose premise 
is the same as 7's but with each equation ~i replaced by the premise of 7;, and 
whose conclusion is the same as 7's. Now we know that 7o's premise is true in ,, and 
70 is in X* ,  so 7o'S conclusion must also be true in ~ by the statements which began 
this paragraph. But this implies that the conclusion of ? is true in t and hence that 
the conclusion of 7' is true in / ,  and so 9- '  satisfies 7'. So f '  is the desired 
structure which satisfies S*  and which has d as a ,-homomorphic image. 
[] 
THEOREM 2. A class oU of structures is a finite ,-implicational c ass if and only 
if it is closed under H*, S, and PR. 
Proof Consider the forward direction. Closure under S and Pn is standard, and 
closure under H* was proven in Theorem 1 (since every finite ,-implication is a 
,-implication). 
Now for the backward direction. Just as in the proof of Theorem 1 (this time 
using the characterization f quasi-varieties given in the introduction), it is enough 
to show that if d satisfies the finite ,-implicational theory ~,~ then d is the 
9 -homomorphic image of some structure which satisfies the finite implicational 
theory ~.  This can be done by carrying out the proof of the corresponding 
statement in Theorem 3, using only finite formulas. [] 
Theorems I and 2 allow us to present he two very different generalizations of
the notion of a variety given in the introduction. The dichotomy becomes more 
sensible when we recognize that ,-varieties and reduced ,-varieties are actually the 
two extremes of an infinite series of notions. (This idea comes from Banaschewski- 
Herrlich [2].) For each infinite cardinal m, let an m-filter be a filter closed under all 
intersections of cardinality less than m, and let an m-reduced product be a reduced 
product by an m-filter, with corresponding class operator PR(m). Then for m a 
38 NtKOLAI WEAVER ALGEBRA UNIV. 
regular infinite cardinal we get the theorems that sr satisfies all the implications in 
3f* with premises of cardinality < m iff d e ISPRt,,,)(OC); and that d satisfies all 
the ,-implications in ~((* with premises of cardinality < m iff ~ ~ H'SPRain O~f'). 
Theorems 1 and 2 can be seen as the special cases when m = N0 and in the limit 
when m is arbitrarily large, since an N0-filter is just a filter and since a filter closed 
under arbitrary intersections must be principal, hence a reduced product which is 
m-reduced for all m is Isomorphic to a direct product. 
Let us also note the relationship between different kinds of homomorphisms and 
different defining formulas. Our ,-homomorphisms may be viewed as interpolating 
between homomorphisms and isomorphisms, just as ,-implications interpolate 
between atomic formulas - i.e. implications with empty premise and implicauons 
(or just as finite ,-implications interpolate between atomic formulas and finite 
implications). 
Although in the algebraic case H*SP = H*SPR, a ,-variety is not always a 
reduced ,-variety; this follows from the fact that there exist ,-varieties not closed 
under unions of chains, but a union of a chain of structures in a reduced ,-variety 
must satisfy any finite implication satisfied by all of its finitely generated substruc- 
tures, hence must itself be in the reduced ,-variety. An example of a ,-variety not 
closed under unions of chains is the one in the type with no operations and one 
binary relation < axiomatized by the formula 
(X 1 < X 2 A X 2 < X 3 A " ' ' )  ~ Xl~-~X2 . ( * )  
Let Ln be a structure with n elements a l , . .  9 an related by a 1 < ' " " < an, with no 
other relations holding; then each Ln satisfies (,), but evidently the union does not. 
In contrast to the situation discussed in Section I, there are infinitely many 
9 -varieties (even infinitely many reduced ,-varieties) in the type with no operations 
and one binary relation. For example, the structures whose graphs are directed 
cycles Cn on n vertices (i.e. whose universes are the vertex sets of the Cn's, and 
which have u < v iff u = v or there is a directed edge from u to v) all generate 
different ,-varieties, because for each n, the Cn-structure is the only one which 
doesn't satisfy the formula Fn but does satisfy F, 1, where Fk is the formula 
(x  1 ~ x 2 A " 9 9 A X k_  l ~ Xk  A X k ~ X 1) ~ X 1 ~ X 2. 
lII. Homomorphisms in .-varieties 
So far we have not dealt with standard homomorphisms. Of course, the reason 
they are standard is that they are very useful, so we need to discuss them. Since 
Vol. 30, 1993 Generalized varieties 39 
,-varieties are generally not closed under H, the general strategy, given a structure 
sd in a ,-variety oU, is to consider only homomorphisms from ag into structures in 
oU. For instance, in the theory of ordered rings one deals with "convex ideals" J
which are ring ideals and which satisfy 
b->0, be J  implies [0, b ]c J ,  
where [0, b] is the interval from 0 to b; and these give rise to precisely those 
homomorphisms whose images are ordered rings. In Theorem 3 we will show that 
the set of homomorphisms from d into structures in Y{ is nice when YF is a 
,-variety (in fact, when oU is a prevariety). 
To start with we define a congruence pair on a structure d to be a pair 
0= (0, {r~}) such that 0 is a congruence on ~r and the r~ are relations of rank m~ 
on A such that r;,*" c r~ for all ~ and 0 is a ,-congruence on s t '  = (d ,  {r~}). (These 
first appeared in Nelson [ 19] under the name "relation kernels.") The quotient d /6  
is defined to equal d ' /0 .  If we think of kernels of homomorphisms a congruence 
pairs rather than as congruences, then we get the expected homomorphism theo- 
rems, which are not true for congruences. 
We order congruence pairs on d by setting (01, {r~ }) -< @2, { r2 }) iff 0~ c 02 
2 for all ~. Also, for any class ~vf of structures, let a ~ff-congruence pair and r~ c r~ 
on d be a congruence pair 0-such that ~r YF, and let a ~-congruence be a 
congruence which beIongs to some Y-congruence pair. 
THEOREM 3. I f  ~ is a prevariety then the ~-congruence pairs on a structure 
d form a complete lattice, as do the oU-congruences. 
Proof To prove that the ~ff-congruence pairs on d form a complete lattice, it 
will suffice to show that arbitrary meets exist, i.e. every collection 
{~} = {,(0i, {r~, })} of gC-congruence pairs on d has a greatest lower bound 
= (0, {r~ }) which is a f -congruence pair. Construct ff by letting 0 = 0 ,  0i and 
for each ~ letting r, = Ni r~,. The 6 so defined is indeed a greatest lower bound in 
the set of congruence pairs. To see that O is a oU-congruence pair, we must show 
that d /0es(  = lSP(a~ff); this is done by taking the natural map, which is an 
isomorphism, from d / f f in to  ]-I d /~. .  It is easy to check that the natural map is an 
isomorphism by using the characterization of isomorphisms into direct products 
remarked in Section I. 
(Notice that the maximal z(-congruence pair on d is (Va, {Am~}); this is a 
~-congruence pair because the quotient is a trivial structure with all relations 
holding, which is isomorphic to the direct product of an empty collection and hence 
is in I P (W)= J{'. If d e ~ then the minimal o'(-congruence pair on d is 
(Ag, {r f  }); the quotient by this is isomorphic to d . )  
40 NIKOLA! WEAVER ALGEBRA UNIV. 
The claim about the set of ~f-congruences follows by considering the natural 
projection from the set of )F-congruence pairs onto the set of X-congruences; 
since this map clearly is onto, and its preserves meets by the construction of 
)F-congruence pair meets; so the set of )F-congruences is a complete meet 
semilattice with a greatest element V~ and hence is a complete lattice. [] 
Note that there are easy examples to show that the set of N-congruences in 
general is not a sublattice of the lattice of equivalence relations. 
We give a simple application of Theorem 3. 
THEOREM 4. Direct and inverse limits exist in any prevariety ~',  considered as 
a category with its homomorphisms a morphisms. 
Proof. Let {d i}  be a directed system of structures in )F, with homomor- 
phisms ~bj : d ;  ~d j  for i <j .  Let d be the substructure of I ]  d~ consisting of all 
elements a which satisfy a( j )= 4)}(a(i)) for all i>~ some io. Define a congruence 
pair ~ = @, {s~ }) on d by setting aOb (or s~(a l , . . . ,  ak)) if there exists i0 such 
that a(i) = b(i) (or s~(al( i ) , . . . ,  ak(i))) for all i > i0. By Theorem 3 there exists a 
least )F-congruence pair t~ >_ ~. Let d '  = d /0 .  One has a natural homomorphism 
d i  ~d/~ for all i (take a' e d~ to a/~ ~ d /~ given by a(j) = ~b}(a') for j  >_ i); so 
one also has a natural homomorphism d i - ,  d ' .  It is easy to see that d '  is the 
direct limit, in o~, of the system {di  }. 
The existence of inverse limits is rather easy to prove - given a directed system 
{d~ }, the inverse limit d is the substructure of the product I-I d~ consisting of all 
elements a which satisfy a(i) = (~i(a(j)) for all i -<j. [] 
The existence of S - f ree  structures (more generally, )F-free products) also 
follows easily from Theorem 3. 
IV. Examples 
We have seen in the introduction that posets and ordered groups are reduced 
,-varieties. Also, the class of ordered rings is a reduced ,-variety since it can be 
axiomatized by the usual ring axioms, the axioms for posets, and the ,-implications 
x<y ~ x+z<-y+z 
(x <_ y A O <_ z) ~ xz <-<_ yz 
(x < y A O < z) ~ zx ~ zy. 
One can also define ordered vector spaces, etc., in this way. 
Vol. 30, 1993 Generalized varieties 41 
The class of graphs is a reduced ,-variety; one defines a graph as a set with a 
binary relation ~ satisfying 
X~X 
x . . . y - *y  ",.x. 
(x ,-~ y means that the distance from x to y is at most 1, i.e. either x = y or x is 
adjacent o y.) Likewise one can define graphs which carry some algebraic structure 
with which they are compatible. 
The class all' 1 of metric spaces of diameter < 1 is a ,-variety. For each real 
number c~ between 0 and 1 inclusive, let r~ be a binary relation, where r~(x, y) is 
intended to mean "x and y are at most ~ apart." S#l is axiomatized by: 
rl (x, y) 
ro(x, x) 
ro(x, y) =~ x ~ y 
r.(x, y) =~ r.(y, x) W 
(r~(x, y) A r#(y, z)) =~ r~r #(x, z) W, # 
r~(x, y) ~ r#(x, y) V~ < fl 
(r~| Ar~r ) A "" ") ~ r~(x,y) Vs. 
Here ~ and fl range over the interval [0, 1], and ~ (~ # = min(a + r, 1). The first 
axiom states that the diameter of the space is at most 1. The next two axioms state 
that the distance p(x,y)  = 0 iff x = y; then we have symmetry of the metric; and 
then the triangle inequality. The last two axioms state properties of distance. The 
homomorphisms of this theory are contractions, isomorphisms are isometrics, and 
direct products take the sup metric. 
The class of all metric spaces is not a .-variety unless we are prepared to admit 
infinite distances, because the product of arbitrary metric spaces, with the sup 
norm, may have elements infinitely far apart. Therefore we define sr to be the 
class of metric spaces which allow points to be infinitely far apart. It is axiomatized 
via binary relations r, for ~ e [0, oo] just as above (with t replaced by oo in the first 
axiom, and @ replaced by +). 
The set J#~ of metric spaces of diameter at most n and only integral distances 
is axiomatized similarly, and as the last axiom is no longer needed it is a reduced 
.-variety. Similarly for s///~o, the class of metric spaces with p(x, y) either an integer 
or infinity for all x, y. 
42 NIKOLAI WEAVER ALGEBRA UNIV. 
Similarly we can axiomatize normed algebras, e.g. normed vector spaces or 
valuation rings, using unary relations r~(x) (meaning, "x has norm at most c~") for 
all ~ ~ [0, oo]. If we restrict the norm to integral values, then we get a reduced 
,-variety, as above: in particular, discrete valuation rings (by which we mean rings 
whose norm takes on only integral values or infinity) form a reduced ,-variety, 
Now we come to topologies. Following Dixon [7] and Kelley [14, chapter 2], we 
treat topological spaces as relational structures by considering net convergence to 
be a relation. We select one relation symbol Fz) for each directed set D (really, we 
only use one D out of each isomorphism class of directed sets). The class {rD } is 
called a convergence class. Each relation re is of rank card(D) + 1, i.e. its arguments 
xa are indexed by d e D ~ {0}. rD is to be thought of as stating that the variables xu, 
d e D, net converge to Xo. We symbolize r({xa}) as (xd) ~xo .  
Under this description of a topological space, a homomorphism is just a 
continuous map, an isomorphism is a homeomorphism, and a direct product of 
spaces takes the Tychonoff product topology. A , -homomorphism from sr onto 
is a continuous map which induces a bijection between the topologies on d and .~. 
Kelly [14] gives necessary and sufficient conditions that a convergence class be 
associated with a topology, i.e. that the rD correspond to precisely those convergent 
nets of some topology. We can give these conditions in the form of ,-implications: 
Constant nets converge. For each directed set D, use the formula~ 
(x)-,x, (1) 
where (x) is indexed by D and is constantly the variable x. 
Subnets o f  convergent nets converge. For each D and D'  such that (xa,)d, ~ D ~ is a 
subnet of (xa)a~ D, use the formula 
(xa)~x ~ (xa , )~x .  (2) 
I f  every subnet has a convergent subnet, then the net converges. Actually, it is 
enough to have that (xd)a ~ D converges if every subnet of the form (xa)a ~ D" has a 
convergent subnet, where D'  is a cofinal subset of D. Since all subnets of this form 
make up a set (rather than a proper class), the needed formulas are not too big: 
(A(y<).,~< -- ,x) ~ (x~)~o--,x. (3) 
That is, we use all formulas of this form such that given any cofinal D'  c D, for 
some i the net (Y<)<~Di s a subnet of (xa)a ~D,. 
Vol. 30, 1993 Generalized varieties 43 
I terated limits. "Given a directed set D and directed sets E a for all d s D, let 
F = D x 1-[ {Ed : d e D}. For (d , f )  ~ F, let R(d , f )  = (d , f (d) ) .  Then 
(S(d, d')) D â€¢ D ~s  implies (S  o R(d , f ) )e  ~s . "  This translates immediately to 
(Xd, a.)Dâ€¢ X => (xa, f (a ) ) r~ x. (4) 
Since formulas (1)-(4) are ,-implications, the class of topological spaces is a 
,-variety. The fact that some rD are infinitary does not affect the proof of 
Theorem t. The fact that the class of relations is a proper class should, though, 
because in proving the preservation theorem for prevarieties one ought to have to 
form a direct product indexed by this class. However, the reader can check that 
the proofs still go through in this case since convergence in a topological space of 
cardinality m is completely determined by the convergence behavior of all nets of 
cardinality 2 m or less. In other words, for any particular space only a small 
number of rD's count. 
It follows that all kinds of topological algebras are ,-varieties, since the axioms 
connecting the topology to the algebraic structure can be written in the form, e.g., 
((xd) --' x ^ (ya)  ~ y) ~ (xd + Yd) ~ x + y. 
Also, see Taylor [26] for "limit laws" which characterize certain kinds of topologi- 
cal groups. 
By the above, the class of topological vector spaces (TVS's) in a ,-variety. By 
[16, w subspaces and products of locally convex TVS's are locally convex; and 
it is easy to see that ,-homomorphic mages are too, so the class of locally convex 
TVS's is a ,-variety. (It is not clear how to simply axiomatize this class using 
,-implications.) 
In the case of pure topological spaces one can isolate a number of ,-varieties 
(see [2] for similar results). All of the properties we discuss are taken from [24, w 
and w First we have separation axioms: To, T1, T2, T289 T3, T389 regular, and 
completely regular. These are all preserved by the formation of subspaces and direct 
products, so they all define ,-varieties. (Recall that for relational structures 
H*SP = ISP . )  Together with the axioms (1)-(4), one can axiomatize To spaces by 
the formulas 
( (x )~y  ^ (y ) - ,x )  ~ x~y;  
one can axiomatize T~ spaces by the formulas 
(x ) -+y  => x , ,~y;  
44 NIKOLAI WEAVER ALGEBRA UNIV. 
and one can axiomatize T2 spaces by the formulas 
((x,~) - ,x  A (x,~) - - ,y)  ~ x ~y .  
We leave it as an exercise for the reader to show that regularity is equivalent to the 
condition that 
where we suppose that for each d, the variables {yff} = {xa,' d' ~ d}, 
Like separation axioms, disconnectedness properties are often preserved by 
subspaces and direct products. Examples from [24] of such properties are: totally 
disconnected, pathwise disconnected, extremely disconnected, totally separated, 
zero-dimensional, and scattered. Note that the ,-variety of topological spaces 
generated by the two-element discrete space is just the class of all totally discon- 
nected spaces. 
Finally we mention that the class of topological spaces with a sort of differen- 
tiable structure form a ,-variety, as do those with C k or C ~ structure. To see this, 
let r(xt) be a relation with variables indexed by the open interval (0, 1). r(xt) is to 
be taken as saying that the map (0, 1) ~ X taking t ~ x~ is differentiable (C k, C~). 
For every differentiable (C ~, Coo) map a : (0, 1) ~(0 ,  1) we set the axiom 
r(xt) =~ r(Xcr(t)); 
also, we set the single axiom 
(n=Aor(Xt+n/2)) ~ r(Xtan(2f/=)), 
where {x, } are distinct variables for s ->- 0. (This says that we can glue together 
overlapping differentiable paths.) 
V. Structure theorems for reduced .-varieties 
If whenever ~4 is isomorphic to a subdirect product of structures {sCi } in of  by 
a map qS, it is isomorphic to some sr by the map ~i ~ ~b, then we say sr is 
of-subdirectly irreducible. Note that of-subdirect irreducibility is equivalent to the 
existence of a smallest non-minimal of-congruence pair. The following theorem is 
a consequence of the results of [5], or [18, chapter 5]. 
Vol. 30, 1993 Generalized varieties 45 
THEOREM 5. I f  3f  is a reduced *-variety then every d ~ 2U is &omorphc to a 
subdireet product of ~-subdirectly irreducible structures in ~.  
In fact, this theorem holds if of  is a quasi-variety. 
Theorem 5 generalizes Birkhoff's subdirect representation theorem for varieties, 
and it can be applied in the same way that one uses Birkhoff's theorem to 
understand the structure of algebras in a variety (i.e., by identifying the subdirectly 
irreducible members of the variety), as in Stone's representation theorem or the 
representation theorem for distributive lattices. Thus, if S is the class of all posers, 
then it is easy to show that the two-element chain 2 is the only ~ff-subdirectly 
irreducible structure. Then by Theorem 5 we get Y = IPs(2). (Of course, this is 
easy to prove from scratch; also see [9].) 
We similarly get the following results. Let 2 be a two-element antichain. Let 2 
be a two-element set with a diversity relation. Let 5 P, N, and N be structures 
defined by the following directed graphs, where the elements of the sets are 
represented by vertices, the relation a -< b is represented by the directed edge ab, 
undirected edges are considered irected both ways, solid vertices represent a -< a, 
and empty vertices represent a :~ a: 
5p 
I> | 9 
Then the ,-variety of antichains is IPs(2); the ,-variety of sets with a diversity 
relation is IPs (22); the ,-variety of sets with an equivalence r lation is IPs (~, 22); the 
*-variety of sets with a transitive and reflexive relation is IPs(2, 22); the ,-variety of 
sets with a symmetric and reflexive relation is IPs(~, 22, J )  = ISP(SP); the ,-variety 
of sets with a reflexive relation is IPs(2, 2, r = ISP(N); and the ,-variety of all 
sets with a binary relation is IPs(2, 2, ~, ~). It is not hard to see that any ,-variety 
contained in the ,-variety T of all sets with a transitive and reflexive relation is 
determined by its two-element members, using the fact that T = IPs(2, 2); thus the 
lattice of these ,-varieties looks like this: 
0 
46 NIKOLA[ WEAVER ALGEBRA UNIV. 
where P is the ,-variety of posets, A is the *-variety of antichains, E is the ,--variety 
of sets with equivalence r lations, D is the ,-variety of sets with a diversity relation, 
and O is the ,-variety of one-element sets with a diversity relation. We also know 
from Section II that there are infinitely many reduced ,-varieties in this type, 
Now we will prove a generalization of J6nsson's theorem (about which, see [13] 
or [6, w 
THEOREM 6. Suppose the reduced .-variety V = H * SP R( 3f" ) generated by a class 
X of structures is V-congruence pair distributive. Then V = IPsH*SPv(gU). 
Proof. It is clear that I PsH*SP  v <- H*SPR. In the other direction, by Theorem 
5 it will suffice to show that any nontrivial V-subdirectly irreducible structure sr in 
V = H*SPR(â€¢)  is in H*SPv(~{'). (By "nontrivial" we mean ~ a one-element 
structure with all relations holding.") Hence let d be such a structure, and since 
d E H*SPR(~)  choose ~,  e ~ (i ~ I), ~ < I-I sg;, and a filter N over I such that 
there is an onto *-homomorphism e : N 'o~ ~ d .  (The notation N .Y is an abbre- 
viation for "the substructure of the reduced product l~ ~/o~ generated by the 
universe of r162 modulo N.'"l Let 6 be the kernel (a V-congruence pair) of e, and let 
W be the set of all filters ~ over I such that ~ ~ N and @ -< O, where O~ is the kernel 
of the natural homomorphism from N Y; onto N 'fr We need to show that Wcontains 
an ultrafilter ~* :  then since Gs~,-<0, the map 9 can be lifted to an onto 
9 -homomorphism r :N 'o~*~s J .  and we wilt have the desired conclusion 
~4 ~ H*SPu(oY~). 
W is nonempty since o~ e W, and the union of any chain of filters in W is also 
clearly in W, so by Zorn's lemma there is a maximal filter in W. (Read that with 
parentheses around "filter in W.") To complete the proof, we must show that any 
such filter is an ultrafilter, or equivalently that for any ~q ~ W which is not an 
ultrafilter, there exists a strictly larger N 'e  W. (Note that the improper filter 2 ~ 
cannot be in W since s~' is nontrivial.) So let (g ~ W not be an ultrafilter, and pick 
S c I such that neither S nor I - S is in ~, and let (4~ and (~z be the smallest filters 
containing ~f which also contain S and I -  S, respectively. Now 
so by V-congruence pair distributivity we have 
and by the fact that d ~ (~1~) /0  is V-subdirectly irreducible, it follows ~hat either 
0 v 0~1 = G or 0 v 0~2 = & Hence one of fie, and Ge2 must be < if, and hence in W 
as desired. [] 
Vol. 30, 1993 Generalized varieties 47 
VI. Mal'cev-like conditions 
It may be of interest hat we can generalize at least some Mal'cev conditions to 
deal with ,-congruences, although this is not what one needs in connection with 
Theorem 6. First we formalize two constructions which have been used above. Let 
T be an algebra and let A be a set of algebraic homomorphisms ~b : T ~ d e into 
structures de .  For each ~b define relations {er r } on T by setting r .. er~ (a l ,  . ,  am~) 
i f f  r f f (q~(a l ) ,  . . . , ~(am=)). Now for each e let r _ r. r~ - ~r er~, we call the resulting 
structure 3- = (T, {r~, }) the weak structure with respect o A. 
Notice that if all the range structures d e satisfy a ,-implication 7 whose 
conclusion is an inequation, then so does the weak structure J .  This is because, if 
the premise of ~, is true in some interpretation t in ~,  then it is true in the same 
interpretation i  (T, {err }) for every qS; hence it is true in every interpretation 4 o z 
in de ;  hence the conclusion of ? is true in all of these interpretations, since each 
d e satisfies 7. This implies that the conclusion is true in l in each (T, {err})  and 
hence in ~.  
Also notice that if for each ~b, 0r is a ,-congruence on de ,  then 
0 = ~O~A q~-l(0r is a ,-congruence on J ,  where q6 ~(Oe) is the equivalence 
relation on 9- defined by (a, b) ~ d~ -1(0r iff (qS(a), 4~(b)) e 0 e. It is an algebraic 
congruence because ach q~ -1(0r is an algebraic ongruence, and it is a ,-congruence 
because ach ~b -~(Oe)is a ,-congruence on (T, {err}) .  We say q is induced by {0r }. 
The weak structure construction was used in Section I to define a ovg-free 
structure; we now give a construction which was used in Theorem 1. Suppose Y(* 
is the ,-implicational theory of a class of structures Yf and Y is a structure which 
satisfies all the ,-implications in ~*  whose conclusions are inequations. Then the 
adaption of Y- to ~r is the structure 3--' = ~--/0, where 0 is the ,-congruence defined 
by setting aOb whenever there is a ,-implication 7 in Yf* whose premise is true in 
some interpretation i into J -  and whose conclusion is t~ ~ tz, where t(t~) = a and 
~(t2) = b. As in the proof of Theorem 1, 0 is a ,-congruence r lation on J ,  and J - '  
satisfies o,~ *, hence is in ISP(Yf). For example, if Y( is the variety of abelian groups 
and 3- is any group, then the adaption of @ to )f" equals the abelianization of Y ,  
i.e. it is 9- modulo its commutator subgroup. 
In the following theorem we generalize Mal'cev's theorem on permutable 
congruences. As we remarked in Section II, if d is an algebra then 1~ = V s, in 
which case the statement of our theorem reduces to the usual result for algebras. 
THEOREM 7. The *-variety Sr is *-congruence-permutable iff there is a term 
p(x, y, z) such that for any d ~ f and a, b ~ d ,  
(a ,b )~ lo~ implies p (a ,a ,b )=b and p(a,b ,b)=a.  
48 NIKOLAI WEAVER ALGEBRA UNIV. 
Proof. First we prove the backwards direction. Let 0 and 0 be ,-congruences on 
~r e fig, and suppose that (a, b) s 0 o ~p, so that for some e s ~ we have aOe~b. 
Then since 0, ~ c 1~,, we can conclude that 
a =p(a, c, c)Op(a, c, b)Op(c, c, b) = b, 
so that (a ,b )~o0.  Hence0oO=Oo0.  
In the other direction, suppose f i  is a .-congruence-permutable ,-variety, let T 
be the term algebra over the generators x, y, z, and let A be the set of all algebraic 
homomorphisms 4) : T--*do from T into structures ~ e f i  such that 
~b(x) l~q~(y) and ~b(y)ldooS(z). Then let Y- be the weak structure with respect o 
A, and let r = Y-/0 be the adaption of Y to fig. If T' is the universe of Y ' ,  then 
J~' is the weak structure with respect o A' = {4~'}, where ~b' : T' ~ d4  is defined by 
~b'([p]) = q~(p). (Here [p] =p/O.) The ,-congruence on Y '  induced (in the sense 
described above) by the .-congruences {Ida} contains the pairs ([x], [y]) and 
([y], [z]), so 19-. contains these pairs as well. 
Hence let 0([x], [y]) and 0([y], [z]) be the principal ,-congruences on J~' gener- 
ated by these pairs. (These obviously exist only if ([x], [y]), ([y], [z]) ~ 19-,.) We 
have ([x], [z]) ~ 0([x], [y]) o 0([y], [z]), so by .-congruence permutability we also 
have (Ix], [z] ) E 0([y], [z]) o 0([x], [y]). So there must exist a term p(x, y, z) such that 
[x]O([y], [z])[p(x, y, z)]O([x], [y])[z]. 
Finally, given any a, b s d ,  s r  f i ,  with (a, b) e 1~, we can form an aigebraic 
homomorphism q~o from T' into ~r taking [x] ~ a and [y], [z] ~-~ b. Then 4)0 s A', 
and it is clear that 0([y], [z]) c q)ol(A~,). Hence [x]O([y], [z])[p(x, y, z)] implies that 
(bo([X]) = q)o([p(x, y, z)]), i.e. a =p(a, b, b). The conclusion b =p(a, a, b) is proven 
similarly. [] 
Similar alterations generalize the standard MaFcev conditions for arithrneticity 
and congruence-distributivity. 
VII. Proof theory 
We now turn to proof theory for implications; see also [1], [15], and [23]. A 
class F of implications is deductively dosed if it satisfies the following conditions: 
(1) triviality. F contains all formulas of the form 4~ =~ ~b, where @ is an 
atomic formula. 
Vol. 30, 1993 Generalized varieties 49 
(2) equivalence. F contains all formulas of the form ~ =~ t ~t ;  if it 
contains (A l~ i )  ~ t~t  2 then it contains (A~)  =~ tz~f i ;  and if it 
contains (A/b~) ~ t 1 ~ t 2 and (As~i)  =~ t2 ~ t3 then it contains 
~ tl ~' t3" 
(3) substitution. If, given a formula in F, one replaces all occurrences of the 
variable x with the term t, then the resulting formula is also in F; more generally, 
any set of variables can be simultaneously replaced by corresponding terms. 
(4) replacement. (a) If F contains the formulas (A14~;) =,. 9 and 
(As4~.) => ~', where 9 = ~o for some i0 ~ J, then F contains the formula 
(Az~(s- ~,-0D ~,-) =~ ~'. More generally, for any set of atomic formulas ~ which 
are the conclusions of formulas 7~ ~ F, one can simultaneously replace ach ~g in the 
premise of a formula 7 ~ F by the premise of 7g, and the resulting formula should 
still be in F. (b) If F contains the formulas (Az4~) =~ t~.~t2 and 
(Ascbi) =~ ~b, where {45i}i~ : = {cbi}i~:, then F also contains (Asqii) =~ ~',  
where ~b' is 4~ with some or all occurrences of t~ replaced by t2. 
(5) expansion. If F contains the formula (A~cb;) =~ 4~ then it contains 
(A j~)  => 4~ whenever {4~,.}~: c {~}i~s. 
If F is any class of implications, then the deductive closure F of F is the smallest 
class of implications containing F which is deductively closed. 
THEOREM 8. Let F be a class of implications. An implication is in F if and only 
if it is satisfied by every structure which satisfies F. 
Proof. The forward direction is tedious but trivial. To prove the backward 
direction, we suppose that the implication 7o is not in F, and we construct a model 
of F in which 70 does not hold. First, let T be the term algebra over the set X of 
variables which occur in 7o- Define relations r f  on T by letting r f (q  . . . .  , tm~ ) hold 
whenever ?~( t  1 . . . .  , tm~ ) is the conclusion of some formula 7 ~/~ whose premise is 
contained in the premise of ~o; and define a .-congruence relation 0 on 
3- = (T, { r f} )  by setting t~Ot2 whenever tl ~ t2 is the conclusion of some formula 
7 ~/~ whose premise is contained in the premise of 7o. 
Let us show that 0 is a ,-congruence relation on Y-. It is certainly an 
equivalence r lation by property (2), equivalence, of F. So suppose siOti, I <- i <- n,, 
so that we have formulas ~,. ~/~ of which si ~ ti are the conclusions, and whose 
premises are contained in 7o'S premise. By equivalence, ~ =~ f~(s~ . . . . .  sn,) 
f~(sl . . . . .  s,~) is in F, and then by expansion and repeated application of replace- 
ment (b) the implication whose premise is the conjunction of the premises of the 7i 
50 NIKOLAI WEAVER ALGEBRA UNIV~ 
and whose conclusion is f~(s t , . . .  , s,=) ~f~( t l , . . . ,  ~,=) is also in F; the premise of 
this formula is contained in 7o'S premise, so we get f~(sl . . . .  s,,)Of=(tl . . . . .  t,~), 
and hence 0 is an algebraic ongruence. Also, suppose that r f ( s l , . . . ,  s,,=) holds 
and siOti for 1 < i --- rn~. Then f~(s~ . . . . .  Sin=) is the conclusion of an implication 
7 e ff whose premise is contained in 70's premise. Let yi be as above: then by 
expanding 7 and repeatedly applying replacement (b), we get that F contains the 
implication whose premise is the conjunction of the premises of the "ti's and the 
premise of 7, and whose conclusion is f=(t~, o . . ,  tm~). The premise of this formula 
is contained in 7o's premise, so we evidently have that r f ( t~ . . . . .  tin=) holds, which 
completes the proof that 0 is a .-congruence relation. Hence let J "= 9-0o 
~--' is a model for F. For, let 7' be in f and suppose its premise ts true in some 
interpretation z': Y~9- ' .  By substitution we can form a new implication 
7 = ((A* ~)  =~ 4)) in/~ from y' by replacing each variable y with a representa- 
tive of t'(y); then the premise of y is true in the natural interpretation 1 : X - .  "d-" 
since the premise of ~" is true in t', and the conclusion of 7 is true in ~ iff the 
conclusion of 7' is true in i'. Now each ~ is true in t, hence by the definition 
of r is the conclusion of a formula in /~ whose premise is contained in 7o'S 
premise, so by replacement (a) we can get an implication ~* ~ F whose premise is 
contained in 70's premise and whose conclusion is the same as 7's; then by the 
construction of 8r ~. we have that the conclusion of y*, hence of 7, is true in ~, hence 
the conclusion of 7" is true in z' and ~--' satisfies 7'. So 3- '  models F. 
Finally, we show that 7o is not true in t. The premise of 7o certainly is true in 
by triviality. But the conclusion of 7o is not true in t, since if some formula y E/~ has 
the same conclusion as 7o and has its premise contained in 7o's premise, then 70 is 
an expansion of y and hence is in F, a contradiction; so by the construction of J - '  
the conclusion of 70 is false in z. This completes the proof. E 
VIII. Problems 
Besides the general problem of continuing the program of "generalizing as much 
as we can of the theory of varieties from universal algebra," several interesting 
problems uggest hemselves: 
(1) In light of Theorem 6, one really wants something like a Mal'cev condition 
for ~-congruence pair distributivity. Find a general way to extend some of 
the known algebraic Mal'cev conditions to ~r pairs. 
(2) Prove some theorems describing the structure of .-varieties. 
(3) Relate our point of view to some of the previous work which has been done 
on "varieties" of topological algebras (e.g. see Taylor [26]). 
Vol. 30, 
(4) 
(5) 
(6) 
1993 Generalized varieties 51 
Find a nicer way to express Kelley's axioms for a convergence class to 
correspond to a topology. Give ,-implications which axiomatize locally 
convex TVS's, spaces with various disconnectedness properties, etc. Use the 
weirder axiom schemes (e.g. our axioms for regular spaces) to prove new 
theorems about the classes they describe. 
Prove some theorems about the lattice of *-varieties and the lattice of 
reduced ,-varieties. 
Give a suitable generalization of the notion of primality. (See Taylor 
[251.) 
Acknowledgement 
I would like to thank Alden Pixley for helping me develop my ideas through 
many stimulating conversations and for giving me substantive and stylistic advice 
about this paper. 
REFERENCES 
[ 1] ANDRI~KA, H. and NEMETI, l., Generalization of the concept of variety and quasivariety to partial 
algebra through category theory. Dissertations Mathematicae 204 (1983), 1-56. 
[2] BANASCHEWSKI, B. and HERRLICH, H, Subcategories defined by implications. Houston J. Math 2 
(1976), no. 2, 149-171. 
[3] BLOOM, S., Varieties of ordered algebras. J Comp. Systems Science 13 (1976), 200-212. 
[4] BURMEISTER, P., A Model-Theoretic Oriented Approach to Partial Algebras. Akademie-Verlag, 
Berlin, 198& 
[5] BuRros, S., Subdirect representations i  axiomatic" classes. Colloq. Math. 34 (1976), 191-197. 
[6] BURRm, S. and SANKAPPANAVAR, U. P., A Course in Universal Algebra. Spinger-Verlag, New 
York, 1981. 
[7] DixoN, P. G., Classes of algebraic systems defined by universal Horn sentences. Algebra Universalis 
7 (1977), 315-339. 
[8] DUFFUS, D. and RIVAL, I., A structure theory for ordered sets. Discrete Math. 35(1981), 53-118. 
[9] FRAi'S~, R., Theory of Relations. North-Holland, New York, 1986. 
[10] Grfitzer, G., Universal Algebra (second edition). Springer-Verlag, New York, 1979. 
[11] HATCHER, W. S., Quasiprimitive subeategories. Math. Ann. 190 (1970), 93-96. 
[12] ISBELL, J. R. Subobjeets, adequacy, completeness and categories of algebras. Rozprawy Math. 36 
(1964). 
[13] J6NSSON, B., Algebras whose congruence lattices are distributive. Math. Scand. 21 (1967), 110-121. 
[14] KELLEY, J. L., General Topology. Van Nostrand Reinhold, New York, 1955. 
[15] KELLY, D., Complete rules of inference for universal sentences. Studia Sci. Math. Hungar. 19 (1984), 
347-362. 
[16] K6THE, G., Topological Vector Spaces L Springer-Verlag, New York, 1969. 
[17] MAL'CEV, A. I., Algebraic Systems. Springer-Verlag, New York, I973. 
[18] MAL'CEV, A. 1., The Metamathematies of Algebraic Systems. North-Holland, Amsterdam, 1971. 
[19] NELSON, E., On the adjointness between operations and relations. Colloq. Math. 33 (1975), 33-40. 
[20] NEMETI, I. and SAIN, ]~., Cone-implieational subcategories and some Birkhoff-type theorems, in 
Universal Algebra (Proc. Coll. Esztergom 1977). Colloq. Math. Soc. J. Bolyai Vol. 29. North-Hol- 
land, Amsterdam, 1981, pp. 535-578. 
52 NIKOLAI WEAVER ALGEBRA UNIV. 
[21] SABIDUSSl, G., Subdirect representations f graphs. Centre de R.echerches Math~matiques. Univer- 
sit~ de Montreal, 1973. 
[22] SA1N, I., On classes of algebraic systems closed with respect to quotients, Universal Algebra and 
Applications. Banach Center Publications, Warsaw, 1982, vol. 9. 
[23] SELMAN, A., Completeness of calculi for axiomatically defined classes of algebras. Algebra Univer- 
salts 2 (1972), 20 32. 
[24] STEEN, L. A. and SEEBACH, J. A. JR., Counterexamples in Topology. Holt, Rinehart, and Winston, 
New York, 1970. 
[25] TAYLOR, W:, Primal topological gebras. Algebra Universalis 9, 211-220. 
[26] TAYLOR, W., Varieties of topological gebras. J. Austral. Math. Soc. 23 (1977), 207-241. 
Note added in proof." Professor Burmeister informs me that Theorems 1 and 2 can 
be derived from results of [4], by encoding relations in a certain manner as partial 
operations. 
Department ofMathematics 
University of California 
Berkeley, California 94720 
USA 
